{"version":3,"file":"proton.min.js","sources":["../src/math/MathUtil.js","../src/math/Span.js","../src/utils/WebGLUtil.js","../src/utils/DomUtil.js","../src/utils/ImgUtil.js","../src/utils/Util.js","../src/utils/Puid.js","../src/core/Pool.js","../src/debug/Stats.js","../src/events/EventDispatcher.js","../src/math/Integration.js","../src/core/Proton.js","../src/utils/Rgb.js","../src/math/ease.js","../src/math/Vector2D.js","../src/core/Particle.js","../src/utils/ColorUtil.js","../src/math/Polar2D.js","../src/math/Mat3.js","../src/math/ArraySpan.js","../src/math/Rectangle.js","../src/initialize/Rate.js","../src/initialize/Initialize.js","../src/initialize/Life.js","../src/zone/Zone.js","../src/zone/PointZone.js","../src/initialize/Position.js","../src/initialize/Velocity.js","../src/initialize/Mass.js","../src/initialize/Radius.js","../src/initialize/Body.js","../src/behaviour/Behaviour.js","../src/behaviour/Force.js","../src/behaviour/Attraction.js","../src/behaviour/RandomDrift.js","../src/behaviour/Gravity.js","../src/behaviour/Collision.js","../src/behaviour/CrossZone.js","../src/behaviour/Alpha.js","../src/behaviour/Scale.js","../src/behaviour/Rotate.js","../src/behaviour/Color.js","../src/behaviour/Cyclone.js","../src/behaviour/Repulsion.js","../src/behaviour/GravityWell.js","../src/initialize/InitializeUtil.js","../src/emitter/Emitter.js","../src/emitter/BehaviourEmitter.js","../src/emitter/FollowEmitter.js","../src/render/BaseRenderer.js","../src/render/CanvasRenderer.js","../src/render/DomRenderer.js","../src/render/EaselRenderer.js","../src/render/PixelRenderer.js","../src/render/PixiRenderer.js","../src/utils/MStack.js","../src/render/WebGLRenderer.js","../src/render/CustomRenderer.js","../src/zone/LineZone.js","../src/zone/CircleZone.js","../src/zone/RectZone.js","../src/zone/ImageZone.js","../src/debug/Debug.js","../src/index.js"],"sourcesContent":["const PI = 3.1415926;\nconst INFINITY = Infinity;\n\nconst MathUtil = {\n  PI: PI,\n  PIx2: PI * 2,\n  PI_2: PI / 2,\n  PI_180: PI / 180,\n  N180_PI: 180 / PI,\n  Infinity: -999,\n\n  isInfinity(num) {\n    return num === this.Infinity || num === INFINITY;\n  },\n\n  randomAToB(a, b, isInt = false) {\n    if (!isInt) return a + Math.random() * (b - a);\n    else return Math.floor(Math.random() * (b - a)) + a;\n  },\n\n  randomFloating(center, f, isInt) {\n    return this.randomAToB(center - f, center + f, isInt);\n  },\n\n  randomColor() {\n    return (\n      \"#\" +\n      (\"00000\" + ((Math.random() * 0x1000000) << 0).toString(16)).slice(-6)\n    );\n  },\n\n  randomZone(display) {},\n\n  floor(num, k = 4) {\n    const digits = Math.pow(10, k);\n    return Math.floor(num * digits) / digits;\n  },\n\n  degreeTransform(a) {\n    return (a * PI) / 180;\n  },\n\n  toColor16(num) {\n    return `#${num.toString(16)}`;\n  }\n};\n\nexport default MathUtil;\n","import Util from \"../utils/Util\";\nimport MathUtil from \"../math/MathUtil\";\n\nexport default class Span {\n  constructor(a, b, center) {\n    if (Util.isArray(a)) {\n      this.isArray = true;\n      this.a = a;\n    } else {\n      this.isArray = false;\n      this.a = Util.initValue(a, 1);\n      this.b = Util.initValue(b, this.a);\n      this.center = Util.initValue(center, false);\n    }\n  }\n\n  getValue(isInt = false) {\n    if (this.isArray) {\n      return Util.getRandFromArray(this.a);\n    } else {\n      if (!this.center) {\n        return MathUtil.randomAToB(this.a, this.b, isInt);\n      } else {\n        return MathUtil.randomFloating(this.a, this.b, isInt);\n      }\n    }\n  }\n\n  /**\n   * Returns a new Span object\n   *\n   * @memberof Proton#Proton.Util\n   * @method setSpanValue\n   *\n   * @todo a, b and c should be 'Mixed' or 'Number'?\n   *\n   * @param {Mixed | Span} a\n   * @param {Mixed}               b\n   * @param {Mixed}               c\n   *\n   * @return {Span}\n   */\n  static setSpanValue(a, b, c) {\n    if (a instanceof Span) {\n      return a;\n    } else {\n      if (b === undefined) {\n        return new Span(a);\n      } else {\n        if (c === undefined) return new Span(a, b);\n        else return new Span(a, b, c);\n      }\n    }\n  }\n\n  /**\n   * Returns the value from a Span, if the param is not a Span it will return the given parameter\n   *\n   * @memberof Proton#Proton.Util\n   * @method getValue\n   *\n   * @param {Mixed | Span} pan\n   *\n   * @return {Mixed} the value of Span OR the parameter if it is not a Span\n   */\n  static getSpanValue(pan) {\n    return pan instanceof Span ? pan.getValue() : pan;\n  }\n}\n","export default {\n  /**\n   * @memberof Proton#Proton.WebGLUtil\n   * @method ipot\n   *\n   * @todo add description\n   * @todo add length description\n   *\n   * @param {Number} length\n   *\n   * @return {Boolean}\n   */\n  ipot(length) {\n    return (length & (length - 1)) === 0;\n  },\n\n  /**\n   * @memberof Proton#Proton.WebGLUtil\n   * @method nhpot\n   *\n   * @todo add description\n   * @todo add length description\n   *\n   * @param {Number} length\n   *\n   * @return {Number}\n   */\n  nhpot(length) {\n    --length;\n    for (let i = 1; i < 32; i <<= 1) {\n      length = length | (length >> i);\n    }\n\n    return length + 1;\n  },\n\n  /**\n   * @memberof Proton#Proton.WebGLUtil\n   * @method makeTranslation\n   *\n   * @todo add description\n   * @todo add tx, ty description\n   * @todo add return description\n   *\n   * @param {Number} tx either 0 or 1\n   * @param {Number} ty either 0 or 1\n   *\n   * @return {Object}\n   */\n  makeTranslation(tx, ty) {\n    return [1, 0, 0, 0, 1, 0, tx, ty, 1];\n  },\n\n  /**\n   * @memberof Proton#Proton.WebGLUtil\n   * @method makeRotation\n   *\n   * @todo add description\n   * @todo add return description\n   *\n   * @param {Number} angleInRadians\n   *\n   * @return {Object}\n   */\n  makeRotation(angleInRadians) {\n    let c = Math.cos(angleInRadians);\n    let s = Math.sin(angleInRadians);\n\n    return [c, -s, 0, s, c, 0, 0, 0, 1];\n  },\n\n  /**\n   * @memberof Proton#Proton.WebGLUtil\n   * @method makeScale\n   *\n   * @todo add description\n   * @todo add tx, ty description\n   * @todo add return description\n   *\n   * @param {Number} sx either 0 or 1\n   * @param {Number} sy either 0 or 1\n   *\n   * @return {Object}\n   */\n  makeScale(sx, sy) {\n    return [sx, 0, 0, 0, sy, 0, 0, 0, 1];\n  },\n\n  /**\n   * @memberof Proton#Proton.WebGLUtil\n   * @method matrixMultiply\n   *\n   * @todo add description\n   * @todo add a, b description\n   * @todo add return description\n   *\n   * @param {Object} a\n   * @param {Object} b\n   *\n   * @return {Object}\n   */\n  matrixMultiply(a, b) {\n    let a00 = a[0 * 3 + 0];\n    let a01 = a[0 * 3 + 1];\n    let a02 = a[0 * 3 + 2];\n    let a10 = a[1 * 3 + 0];\n    let a11 = a[1 * 3 + 1];\n    let a12 = a[1 * 3 + 2];\n    let a20 = a[2 * 3 + 0];\n    let a21 = a[2 * 3 + 1];\n    let a22 = a[2 * 3 + 2];\n    let b00 = b[0 * 3 + 0];\n    let b01 = b[0 * 3 + 1];\n    let b02 = b[0 * 3 + 2];\n    let b10 = b[1 * 3 + 0];\n    let b11 = b[1 * 3 + 1];\n    let b12 = b[1 * 3 + 2];\n    let b20 = b[2 * 3 + 0];\n    let b21 = b[2 * 3 + 1];\n    let b22 = b[2 * 3 + 2];\n\n    return [\n      a00 * b00 + a01 * b10 + a02 * b20,\n      a00 * b01 + a01 * b11 + a02 * b21,\n      a00 * b02 + a01 * b12 + a02 * b22,\n      a10 * b00 + a11 * b10 + a12 * b20,\n      a10 * b01 + a11 * b11 + a12 * b21,\n      a10 * b02 + a11 * b12 + a12 * b22,\n      a20 * b00 + a21 * b10 + a22 * b20,\n      a20 * b01 + a21 * b11 + a22 * b21,\n      a20 * b02 + a21 * b12 + a22 * b22\n    ];\n  }\n};\n","export default {\n  /**\n   * Creates and returns a new canvas. The opacity is by default set to 0\n   *\n   * @memberof Proton#Proton.DomUtil\n   * @method createCanvas\n   *\n   * @param {String} $id the canvas' id\n   * @param {Number} $width the canvas' width\n   * @param {Number} $height the canvas' height\n   * @param {String} [$position=absolute] the canvas' position, default is 'absolute'\n   *\n   * @return {Object}\n   */\n  createCanvas(id, width, height, position = \"absolute\") {\n    const dom = document.createElement(\"canvas\");\n\n    dom.id = id;\n    dom.width = width;\n    dom.height = height;\n    dom.style.opacity = 0;\n    dom.style.position = position;\n    this.transform(dom, -500, -500, 0, 0);\n\n    return dom;\n  },\n\n  createDiv(id, width, height) {\n    const dom = document.createElement(\"div\");\n\n    dom.id = id;\n    dom.style.position = \"absolute\";\n    this.resize(dom, width, height);\n\n    return dom;\n  },\n\n  resize(dom, width, height) {\n    dom.style.width = width + \"px\";\n    dom.style.height = height + \"px\";\n    dom.style.marginLeft = -width / 2 + \"px\";\n    dom.style.marginTop = -height / 2 + \"px\";\n  },\n\n  /**\n   * Adds a transform: translate(), scale(), rotate() to a given div dom for all browsers\n   *\n   * @memberof Proton#Proton.DomUtil\n   * @method transform\n   *\n   * @param {HTMLDivElement} div\n   * @param {Number} $x\n   * @param {Number} $y\n   * @param {Number} $scale\n   * @param {Number} $rotate\n   */\n  transform(div, x, y, scale, rotate) {\n    div.style.willChange = \"transform\";\n    const transform = `translate(${x}px, ${y}px) scale(${scale}) rotate(${rotate}deg)`;\n    this.css3(div, \"transform\", transform);\n  },\n\n  transform3d(div, x, y, scale, rotate) {\n    div.style.willChange = \"transform\";\n    const transform = `translate3d(${x}px, ${y}px, 0) scale(${scale}) rotate(${rotate}deg)`;\n    this.css3(div, \"backfaceVisibility\", \"hidden\");\n    this.css3(div, \"transform\", transform);\n  },\n\n  css3(div, key, val) {\n    const bkey = key.charAt(0).toUpperCase() + key.substr(1);\n\n    div.style[`Webkit${bkey}`] = val;\n    div.style[`Moz${bkey}`] = val;\n    div.style[`O${bkey}`] = val;\n    div.style[`ms${bkey}`] = val;\n    div.style[`${key}`] = val;\n  }\n};\n","import WebGLUtil from \"./WebGLUtil\";\nimport DomUtil from \"./DomUtil\";\n\nconst imgsCache = {};\nconst canvasCache = {};\nlet canvasId = 0;\n\nexport default {\n  /**\n   * This will get the image data. It could be necessary to create a Proton.Zone.\n   *\n   * @memberof Proton#Proton.Util\n   * @method getImageData\n   *\n   * @param {HTMLCanvasElement}   context any canvas, must be a 2dContext 'canvas.getContext('2d')'\n   * @param {Object}              image   could be any dom image, e.g. document.getElementById('thisIsAnImgTag');\n   * @param {Proton.Rectangle}    rect\n   */\n  getImageData(context, image, rect) {\n    context.drawImage(image, rect.x, rect.y);\n    const imagedata = context.getImageData(\n      rect.x,\n      rect.y,\n      rect.width,\n      rect.height\n    );\n    context.clearRect(rect.x, rect.y, rect.width, rect.height);\n\n    return imagedata;\n  },\n\n  /**\n   * @memberof Proton#Proton.Util\n   * @method getImgFromCache\n   *\n   * @todo add description\n   * @todo describe func\n   *\n   * @param {Mixed}               img\n   * @param {Proton.Particle}     particle\n   * @param {Boolean}             drawCanvas  set to true if a canvas should be saved into particle.data.canvas\n   * @param {Boolean}             func\n   */\n  getImgFromCache(img, callback, param) {\n    const src = typeof img === \"string\" ? img : img.src;\n\n    if (imgsCache[src]) {\n      callback(imgsCache[src], param);\n    } else {\n      const image = new Image();\n      image.onload = e => {\n        imgsCache[src] = e.target;\n        callback(imgsCache[src], param);\n      };\n\n      image.src = src;\n    }\n  },\n\n  getCanvasFromCache(img, callback, param) {\n    const src = img.src;\n\n    if (!canvasCache[src]) {\n      const width = WebGLUtil.nhpot(img.width);\n      const height = WebGLUtil.nhpot(img.height);\n\n      const canvas = DomUtil.createCanvas(\n        `proton_canvas_cache_${++canvasId}`,\n        width,\n        height\n      );\n      const context = canvas.getContext(\"2d\");\n      context.drawImage(img, 0, 0, img.width, img.height);\n\n      canvasCache[src] = canvas;\n    }\n\n    callback && callback(canvasCache[src], param);\n\n    return canvasCache[src];\n  }\n};\n","import Span from \"../math/Span\";\nimport ImgUtil from \"./ImgUtil\";\n\nexport default {\n  /**\n   * Returns the default if the value is null or undefined\n   *\n   * @memberof Proton#Proton.Util\n   * @method initValue\n   *\n   * @param {Mixed} value a specific value, could be everything but null or undefined\n   * @param {Mixed} defaults the default if the value is null or undefined\n   */\n  initValue(value, defaults) {\n    value = value !== null && value !== undefined ? value : defaults;\n    return value;\n  },\n\n  /**\n   * Checks if the value is a valid array\n   *\n   * @memberof Proton#Proton.Util\n   * @method isArray\n   *\n   * @param {Array} value Any array\n   *\n   * @returns {Boolean}\n   */\n  isArray(value) {\n    return Object.prototype.toString.call(value) === \"[object Array]\";\n  },\n\n  /**\n   * Destroyes the given array\n   *\n   * @memberof Proton#Proton.Util\n   * @method emptyArray\n   *\n   * @param {Array} array Any array\n   */\n  emptyArray(arr) {\n    if (arr) arr.length = 0;\n  },\n\n  toArray(arr) {\n    return this.isArray(arr) ? arr : [arr];\n  },\n\n  getRandFromArray(arr) {\n    if (!arr) return null;\n    return arr[Math.floor(arr.length * Math.random())];\n  },\n\n  /**\n   * Destroyes the given object\n   *\n   * @memberof Proton#Proton.Util\n   * @method emptyObject\n   *\n   * @param {Object} obj Any object\n   */\n  emptyObject(obj, ignore = null) {\n    for (let key in obj) {\n      if (ignore && ignore.indexOf(key) > -1) continue;\n      delete obj[key];\n    }\n  },\n\n  /**\n   * Makes an instance of a class and binds the given array\n   *\n   * @memberof Proton#Proton.Util\n   * @method classApply\n   *\n   * @param {Function} constructor A class to make an instance from\n   * @param {Array} [args] Any array to bind it to the constructor\n   *\n   * @return {Object} The instance of constructor, optionally bind with args\n   */\n  classApply(constructor, args = null) {\n    if (!args) {\n      return new constructor();\n    } else {\n      const FactoryFunc = constructor.bind.apply(\n        constructor,\n        [null].concat(args)\n      );\n      return new FactoryFunc();\n    }\n  },\n\n  /**\n   * @memberof Proton#Proton.Util\n   * @method setVectorVal\n   *\n   * @todo add description for param `target`\n   * @todo add description for param `conf`\n   * @todo add description for function\n   *\n   * @param {Object} target\n   * @param {Object} conf\n   */\n  setVectorVal(particle, conf = null) {\n    if (!conf) return;\n\n    if (this.hasProp(conf, \"x\")) particle.p.x = conf[\"x\"];\n    if (this.hasProp(conf, \"y\")) particle.p.y = conf[\"y\"];\n\n    if (this.hasProp(conf, \"vx\")) particle.v.x = conf[\"vx\"];\n    if (this.hasProp(conf, \"vy\")) particle.v.y = conf[\"vy\"];\n\n    if (this.hasProp(conf, \"ax\")) particle.a.x = conf[\"ax\"];\n    if (this.hasProp(conf, \"ay\")) particle.a.y = conf[\"ay\"];\n\n    if (this.hasProp(conf, \"p\")) particle.p.copy(conf[\"p\"]);\n    if (this.hasProp(conf, \"v\")) particle.v.copy(conf[\"v\"]);\n    if (this.hasProp(conf, \"a\")) particle.a.copy(conf[\"a\"]);\n\n    if (this.hasProp(conf, \"position\")) particle.p.copy(conf[\"position\"]);\n    if (this.hasProp(conf, \"velocity\")) particle.v.copy(conf[\"velocity\"]);\n    if (this.hasProp(conf, \"accelerate\")) particle.a.copy(conf[\"accelerate\"]);\n  },\n\n  hasProp(target, key) {\n    if (!target) return false;\n    return target[key] !== undefined;\n    // return obj.hasOwnProperty(key);\n  },\n\n  /**\n   * set the prototype in a given prototypeObject\n   *\n   * @memberof Proton#Proton.Util\n   * @method setProp\n   *\n   * @todo add description for param `target`\n   * @todo translate desription from chinese to english\n   *\n   * @param {Object} target\n   * @param {Object} prototypeObject An object of single prototypes\n   *\n   * @return {Object} target\n   */\n  setProp(target, props) {\n    for (let prop in props) {\n      if (target.hasOwnProperty(prop)) {\n        target[prop] = Span.getSpanValue(props[prop]);\n      }\n    }\n\n    return target;\n  },\n\n  /**\n   * This will get the image data. It could be necessary to create a Proton.Zone.\n   *\n   * @memberof Proton#Proton.Util\n   * @method getImageData\n   *\n   * @param {HTMLCanvasElement}   context any canvas, must be a 2dContext 'canvas.getContext('2d')'\n   * @param {Object}              image   could be any dom image, e.g. document.getElementById('thisIsAnImgTag');\n   * @param {Proton.Rectangle}    rect\n   */\n  getImageData(context, image, rect) {\n    return ImgUtil.getImageData(context, image, rect);\n  },\n\n  destroyAll(arr, param = null) {\n    let i = arr.length;\n\n    while (i--) {\n      try {\n        arr[i].destroy(param);\n      } catch (e) {}\n\n      delete arr[i];\n    }\n\n    arr.length = 0;\n  }\n};\n","const idsMap = {};\n\nconst Puid = {\n  _index: 0,\n  _cache: {},\n\n  id(type) {\n    if (idsMap[type] === undefined || idsMap[type] === null) idsMap[type] = 0;\n    return `${type}_${idsMap[type]++}`;\n  },\n\n  getId(target) {\n    let uid = this.getIdFromCache(target);\n    if (uid) return uid;\n\n    uid = `PUID_${this._index++}`;\n    this._cache[uid] = target;\n\n    return uid;\n  },\n\n  getIdFromCache(target) {\n    let obj, id;\n\n    for (id in this._cache) {\n      obj = this._cache[id];\n\n      if (obj === target) return id;\n      if (this.isBody(obj, target) && obj.src === target.src) return id;\n    }\n\n    return null;\n  },\n\n  isBody(obj, target) {\n    return (\n      typeof obj === \"object\" &&\n      typeof target === \"object\" &&\n      obj.isInner &&\n      target.isInner\n    );\n  },\n\n  getTarget(uid) {\n    return this._cache[uid];\n  }\n};\n\nexport default Puid;\n","/**\n * Pool is the cache pool of the proton engine, it is very important.\n *\n * get(target, params, uid)\n *  Class\n *    uid = Puid.getId -> Puid save target cache\n *    target.__puid = uid\n *\n *  body\n *    uid = Puid.getId -> Puid save target cache\n *\n *\n * expire(target)\n *  cache[target.__puid] push target\n *\n */\nimport Util from \"../utils/Util\";\nimport Puid from \"../utils/Puid\";\n\nexport default class Pool {\n  /**\n   * @memberof! Proton#\n   * @constructor\n   * @alias Proton.Pool\n   *\n   * @todo add description\n   * @todo add description of properties\n   *\n   * @property {Number} total\n   * @property {Object} cache\n   */\n  constructor(num) {\n    this.total = 0;\n    this.cache = {};\n  }\n\n  /**\n   * @todo add description\n   *\n   * @method get\n   * @memberof Proton#Proton.Pool\n   *\n   * @param {Object|Function} target\n   * @param {Object} [params] just add if `target` is a function\n   *\n   * @return {Object}\n   */\n  get(target, params, uid) {\n    let p;\n    uid = uid || target.__puid || Puid.getId(target);\n\n    if (this.cache[uid] && this.cache[uid].length > 0) {\n      p = this.cache[uid].pop();\n    } else {\n      p = this.createOrClone(target, params);\n    }\n\n    p.__puid = target.__puid || uid;\n    return p;\n  }\n\n  /**\n   * @todo add description\n   *\n   * @method set\n   * @memberof Proton#Proton.Pool\n   *\n   * @param {Object} target\n   *\n   * @return {Object}\n   */\n  expire(target) {\n    return this.getCache(target.__puid).push(target);\n  }\n\n  /**\n   * Creates a new class instance\n   *\n   * @todo add more documentation\n   *\n   * @method create\n   * @memberof Proton#Proton.Pool\n   *\n   * @param {Object|Function} target any Object or Function\n   * @param {Object} [params] just add if `target` is a function\n   *\n   * @return {Object}\n   */\n  createOrClone(target, params) {\n    this.total++;\n\n    if (this.create) {\n      return this.create(target, params);\n    } else if (typeof target === \"function\") {\n      return Util.classApply(target, params);\n    } else {\n      return target.clone();\n    }\n  }\n\n  /**\n   * @todo add description - what is in the cache?\n   *\n   * @method getCount\n   * @memberof Proton#Proton.Pool\n   *\n   * @return {Number}\n   */\n  getCount() {\n    let count = 0;\n    for (let id in this.cache) count += this.cache[id].length;\n    return count++;\n  }\n\n  /**\n   * Destroyes all items from Pool.cache\n   *\n   * @method destroy\n   * @memberof Proton#Proton.Pool\n   */\n  destroy() {\n    for (let id in this.cache) {\n      this.cache[id].length = 0;\n      delete this.cache[id];\n    }\n  }\n\n  /**\n   * Returns Pool.cache\n   *\n   * @method getCache\n   * @memberof Proton#Proton.Pool\n   * @private\n   *\n   * @param {Number} uid the unique id\n   *\n   * @return {Object}\n   */\n  getCache(uid = \"default\") {\n    if (!this.cache[uid]) this.cache[uid] = [];\n    return this.cache[uid];\n  }\n}\n","export default class Stats {\n  constructor(proton) {\n    this.proton = proton;\n    this.container = null;\n    this.type = 1;\n\n    this.emitterIndex = 0;\n    this.rendererIndex = 0;\n  }\n\n  update(style, body) {\n    this.add(style, body);\n\n    const emitter = this.getEmitter();\n    const renderer = this.getRenderer();\n    let str = \"\";\n\n    switch (this.type) {\n      case 2:\n        str += \"emitter:\" + this.proton.emitters.length + \"<br>\";\n        if (emitter) str += \"em speed:\" + emitter.emitSpeed + \"<br>\";\n        if (emitter) str += \"pos:\" + this.getEmitterPos(emitter);\n        break;\n\n      case 3:\n        if (emitter)\n          str += \"initializes:\" + emitter.initializes.length + \"<br>\";\n        if (emitter)\n          str +=\n            '<span style=\"display:inline-block;\">' +\n            this.concatArr(emitter.initializes) +\n            \"</span><br>\";\n        if (emitter) str += \"behaviours:\" + emitter.behaviours.length + \"<br>\";\n        if (emitter)\n          str +=\n            '<span style=\"display:inline-block;\">' +\n            this.concatArr(emitter.behaviours) +\n            \"</span><br>\";\n        break;\n\n      case 4:\n        if (renderer) str += renderer.name + \"<br>\";\n        if (renderer) str += \"body:\" + this.getCreatedNumber(renderer) + \"<br>\";\n        break;\n\n      default:\n        str += \"particles:\" + this.proton.getCount() + \"<br>\";\n        str += \"pool:\" + this.proton.pool.getCount() + \"<br>\";\n        str += \"total:\" + this.proton.pool.total;\n    }\n\n    this.container.innerHTML = str;\n  }\n\n  add(style, body) {\n    if (!this.container) {\n      this.type = 1;\n\n      this.container = document.createElement(\"div\");\n      this.container.style.cssText = [\n        \"position:absolute;bottom:0px;left:0;cursor:pointer;\",\n        \"opacity:0.9;z-index:10000;padding:10px;font-size:12px;font-family:Helvetica,Arial,sans-serif;\",\n        \"width:120px;height:50px;background-color:#002;color:#0ff;\"\n      ].join(\"\");\n\n      this.container.addEventListener(\n        \"click\",\n        e => {\n          this.type++;\n          if (this.type > 4) this.type = 1;\n        },\n        false\n      );\n\n      let bg, color;\n      switch (style) {\n        case 2:\n          bg = \"#201\";\n          color = \"#f08\";\n          break;\n\n        case 3:\n          bg = \"#020\";\n          color = \"#0f0\";\n          break;\n\n        default:\n          bg = \"#002\";\n          color = \"#0ff\";\n      }\n\n      this.container.style[\"background-color\"] = bg;\n      this.container.style[\"color\"] = color;\n    }\n\n    if (!this.container.parentNode) {\n      body = body || this.body || document.body;\n      body.appendChild(this.container);\n    }\n  }\n\n  getEmitter() {\n    return this.proton.emitters[this.emitterIndex];\n  }\n\n  getRenderer() {\n    return this.proton.renderers[this.rendererIndex];\n  }\n\n  concatArr(arr) {\n    let result = \"\";\n    if (!arr || !arr.length) return result;\n\n    for (let i = 0; i < arr.length; i++) {\n      result += (arr[i].name || \"\").substr(0, 1) + \".\";\n    }\n\n    return result;\n  }\n\n  getCreatedNumber(renderer) {\n    return renderer.pool.total || (renderer.cpool && renderer.cpool.total) || 0;\n  }\n\n  getEmitterPos(e) {\n    return Math.round(e.p.x) + \",\" + Math.round(e.p.y);\n  }\n}\n","/*\n * EventDispatcher\n * This code reference since http://createjs.com/.\n *\n **/\n\nexport default class EventDispatcher {\n  constructor() {\n    this._listeners = null;\n  }\n\n  static bind(target) {\n    target.prototype.dispatchEvent = EventDispatcher.prototype.dispatchEvent;\n\n    target.prototype.hasEventListener =\n      EventDispatcher.prototype.hasEventListener;\n\n    target.prototype.addEventListener =\n      EventDispatcher.prototype.addEventListener;\n\n    target.prototype.removeEventListener =\n      EventDispatcher.prototype.removeEventListener;\n\n    target.prototype.removeAllEventListeners =\n      EventDispatcher.prototype.removeAllEventListeners;\n  }\n\n  addEventListener(type, listener) {\n    if (!this._listeners) {\n      this._listeners = {};\n    } else {\n      this.removeEventListener(type, listener);\n    }\n\n    if (!this._listeners[type]) this._listeners[type] = [];\n    this._listeners[type].push(listener);\n\n    return listener;\n  }\n\n  removeEventListener(type, listener) {\n    if (!this._listeners) return;\n    if (!this._listeners[type]) return;\n\n    const arr = this._listeners[type];\n    const length = arr.length;\n\n    for (let i = 0; i < length; i++) {\n      if (arr[i] === listener) {\n        if (length === 1) {\n          delete this._listeners[type];\n        }\n\n        // allows for faster checks.\n        else {\n          arr.splice(i, 1);\n        }\n\n        break;\n      }\n    }\n  }\n\n  removeAllEventListeners(type) {\n    if (!type) this._listeners = null;\n    else if (this._listeners) delete this._listeners[type];\n  }\n\n  dispatchEvent(type, args) {\n    let result = false;\n    const listeners = this._listeners;\n\n    if (type && listeners) {\n      let arr = listeners[type];\n      if (!arr) return result;\n\n      // arr = arr.slice();\n      // to avoid issues with items being removed or added during the dispatch\n\n      let handler;\n      let i = arr.length;\n      while (i--) {\n        handler = arr[i];\n        result = result || handler(args);\n      }\n    }\n\n    return !!result;\n  }\n\n  hasEventListener(type) {\n    const listeners = this._listeners;\n    return !!(listeners && listeners[type]);\n  }\n}\n","export default class Integration {\n  constructor(type) {\n    this.type = type;\n  }\n\n  calculate(particles, time, damping) {\n    this.eulerIntegrate(particles, time, damping);\n  }\n\n  // Euler Integrate\n  // https://rosettacode.org/wiki/Euler_method\n  eulerIntegrate(particle, time, damping) {\n    if (!particle.sleep) {\n      particle.old.p.copy(particle.p);\n      particle.old.v.copy(particle.v);\n\n      particle.a.multiplyScalar(1 / particle.mass);\n      particle.v.add(particle.a.multiplyScalar(time));\n      particle.p.add(particle.old.v.multiplyScalar(time));\n\n      if (damping) particle.v.multiplyScalar(damping);\n\n      particle.a.clear();\n    }\n  }\n}\n","import Pool from \"./Pool\";\nimport Util from \"../utils/Util\";\nimport Stats from \"../debug/Stats\";\nimport EventDispatcher from \"../events/EventDispatcher\";\nimport MathUtil from \"../math/MathUtil\";\nimport Integration from \"../math/Integration\";\n\nexport default class Proton {\n  static USE_CLOCK = false;\n\n  // measure 1:100\n  static MEASURE = 100;\n  static EULER = \"euler\";\n  static RK2 = \"runge-kutta2\";\n\n  // event name\n  static PARTICLE_CREATED = \"PARTICLE_CREATED\";\n  static PARTICLE_UPDATE = \"PARTICLE_UPDATE\";\n  static PARTICLE_SLEEP = \"PARTICLE_SLEEP\";\n  static PARTICLE_DEAD = \"PARTICLE_DEAD\";\n\n  static EMITTER_ADDED = \"EMITTER_ADDED\";\n  static EMITTER_REMOVED = \"EMITTER_REMOVED\";\n\n  static PROTON_UPDATE = \"PROTON_UPDATE\";\n  static PROTON_UPDATE_AFTER = \"PROTON_UPDATE_AFTER\";\n  static DEFAULT_INTERVAL = 0.0167;\n\n  static amendChangeTabsBug = true;\n\n  /**\n   * The constructor to add emitters\n   *\n   * @constructor Proton\n   *\n   * @todo proParticleCount is not in use\n   * @todo add more documentation of the single properties and parameters\n   *\n   * @param {Number} [proParticleCount] not in use?\n   * @param {Number} [integrationType=Proton.EULER]\n   *\n   * @property {String} [integrationType=Proton.EULER]\n   * @property {Array} emitters   All added emitter\n   * @property {Array} renderers  All added renderer\n   * @property {Number} time      The active time\n   * @property {Number} oldtime   The old time\n   */\n  constructor(integrationType) {\n    this.emitters = [];\n    this.renderers = [];\n\n    this.time = 0;\n    this.now = 0;\n    this.then = 0;\n    this.elapsed = 0;\n\n    this.stats = new Stats(this);\n    this.pool = new Pool(80);\n\n    this.integrationType = Util.initValue(integrationType, Proton.EULER);\n    this.integrator = new Integration(this.integrationType);\n\n    this._fps = \"auto\";\n    this._interval = Proton.DEFAULT_INTERVAL;\n  }\n\n  set fps(fps) {\n    this._fps = fps;\n    this._interval =\n      fps === \"auto\" ? Proton.DEFAULT_INTERVAL : MathUtil.floor(1 / fps, 7);\n  }\n\n  get fps() {\n    return this._fps;\n  }\n\n  /**\n   * add a type of Renderer\n   *\n   * @method addRenderer\n   * @memberof Proton\n   * @instance\n   *\n   * @param {Renderer} render\n   */\n  addRenderer(render) {\n    render.init(this);\n    this.renderers.push(render);\n  }\n\n  /**\n   * @name add a type of Renderer\n   *\n   * @method addRenderer\n   * @param {Renderer} render\n   */\n  removeRenderer(render) {\n    const index = this.renderers.indexOf(render);\n    this.renderers.splice(index, 1);\n    render.remove(this);\n  }\n\n  /**\n   * add the Emitter\n   *\n   * @method addEmitter\n   * @memberof Proton\n   * @instance\n   *\n   * @param {Emitter} emitter\n   */\n  addEmitter(emitter) {\n    this.emitters.push(emitter);\n    emitter.parent = this;\n\n    this.dispatchEvent(Proton.EMITTER_ADDED, emitter);\n  }\n\n  /**\n   * Removes an Emitter\n   *\n   * @method removeEmitter\n   * @memberof Proton\n   * @instance\n   *\n   * @param {Proton.Emitter} emitter\n   */\n  removeEmitter(emitter) {\n    const index = this.emitters.indexOf(emitter);\n    this.emitters.splice(index, 1);\n    emitter.parent = null;\n\n    this.dispatchEvent(Proton.EMITTER_REMOVED, emitter);\n  }\n\n  /**\n   * Updates all added emitters\n   *\n   * @method update\n   * @memberof Proton\n   * @instance\n   */\n  update() {\n    // 'auto' is the default browser refresh rate, the vast majority is 60fps\n    if (this._fps === \"auto\") {\n      this.dispatchEvent(Proton.PROTON_UPDATE);\n\n      if (Proton.USE_CLOCK) {\n        if (!this.then) this.then = new Date().getTime();\n        this.now = new Date().getTime();\n        this.elapsed = (this.now - this.then) * 0.001;\n        // Fix bugs such as chrome browser switching tabs causing excessive time difference\n        this.amendChangeTabsBug();\n\n        if (this.elapsed > 0) this.emittersUpdate(this.elapsed);\n        this.then = this.now;\n      } else {\n        this.emittersUpdate(Proton.DEFAULT_INTERVAL);\n      }\n\n      this.dispatchEvent(Proton.PROTON_UPDATE_AFTER);\n    }\n\n    // If the fps frame rate is set\n    else {\n      if (!this.then) this.then = new Date().getTime();\n      this.now = new Date().getTime();\n      this.elapsed = (this.now - this.then) * 0.001;\n\n      if (this.elapsed > this._interval) {\n        this.dispatchEvent(Proton.PROTON_UPDATE);\n        this.emittersUpdate(this._interval);\n        // https://stackoverflow.com/questions/19764018/controlling-fps-with-requestanimationframe\n        this.then = this.now - (this.elapsed % this._interval) * 1000;\n        this.dispatchEvent(Proton.PROTON_UPDATE_AFTER);\n      }\n    }\n  }\n\n  emittersUpdate(elapsed) {\n    let i = this.emitters.length;\n    while (i--) this.emitters[i].update(elapsed);\n  }\n\n  /**\n   * @todo add description\n   *\n   * @method amendChangeTabsBug\n   * @memberof Proton\n   * @instance\n   */\n  amendChangeTabsBug() {\n    if (!Proton.amendChangeTabsBug) return;\n    if (this.elapsed > 0.5) {\n      this.then = new Date().getTime();\n      this.elapsed = 0;\n    }\n  }\n\n  /**\n   * Counts all particles from all emitters\n   *\n   * @method getCount\n   * @memberof Proton\n   * @instance\n   */\n  getCount() {\n    let total = 0;\n    let i = this.emitters.length;\n\n    while (i--) total += this.emitters[i].particles.length;\n    return total;\n  }\n\n  getAllParticles() {\n    let particles = [];\n    let i = this.emitters.length;\n\n    while (i--) particles = particles.concat(this.emitters[i].particles);\n    return particles;\n  }\n\n  destroyAllEmitters() {\n    Util.destroyAll(this.emitters);\n  }\n\n  /**\n   * Destroys everything related to this Proton instance. This includes all emitters, and all properties\n   *\n   * @method destroy\n   * @memberof Proton\n   * @instance\n   */\n  destroy(remove = false) {\n    const destroyOther = () => {\n      this.time = 0;\n      this.then = 0;\n      this.pool.destroy();\n\n      Util.destroyAll(this.emitters);\n      Util.destroyAll(this.renderers, this.getAllParticles());\n    };\n\n    if (remove) {\n      setTimeout(destroyOther, 200);\n    } else {\n      destroyOther();\n    }\n  }\n}\n\nEventDispatcher.bind(Proton);\n","export default class Rgb {\n  constructor(r = 255, g = 255, b = 255) {\n    this.r = r;\n    this.g = g;\n    this.b = b;\n  }\n\n  reset() {\n    this.r = 255;\n    this.g = 255;\n    this.b = 255;\n  }\n}\n","import MathUtil from \"./MathUtil\";\n\nexport default {\n  easeLinear(value) {\n    return value;\n  },\n\n  easeInQuad(value) {\n    return Math.pow(value, 2);\n  },\n\n  easeOutQuad(value) {\n    return -(Math.pow(value - 1, 2) - 1);\n  },\n\n  easeInOutQuad(value) {\n    if ((value /= 0.5) < 1) return 0.5 * Math.pow(value, 2);\n\n    return -0.5 * ((value -= 2) * value - 2);\n  },\n\n  easeInCubic(value) {\n    return Math.pow(value, 3);\n  },\n\n  easeOutCubic(value) {\n    return Math.pow(value - 1, 3) + 1;\n  },\n\n  easeInOutCubic(value) {\n    if ((value /= 0.5) < 1) return 0.5 * Math.pow(value, 3);\n\n    return 0.5 * (Math.pow(value - 2, 3) + 2);\n  },\n\n  easeInQuart(value) {\n    return Math.pow(value, 4);\n  },\n\n  easeOutQuart(value) {\n    return -(Math.pow(value - 1, 4) - 1);\n  },\n\n  easeInOutQuart(value) {\n    if ((value /= 0.5) < 1) return 0.5 * Math.pow(value, 4);\n\n    return -0.5 * ((value -= 2) * Math.pow(value, 3) - 2);\n  },\n\n  easeInSine(value) {\n    return -Math.cos(value * MathUtil.PI_2) + 1;\n  },\n\n  easeOutSine(value) {\n    return Math.sin(value * MathUtil.PI_2);\n  },\n\n  easeInOutSine(value) {\n    return -0.5 * (Math.cos(Math.PI * value) - 1);\n  },\n\n  easeInExpo(value) {\n    return value === 0 ? 0 : Math.pow(2, 10 * (value - 1));\n  },\n\n  easeOutExpo(value) {\n    return value === 1 ? 1 : -Math.pow(2, -10 * value) + 1;\n  },\n\n  easeInOutExpo(value) {\n    if (value === 0) return 0;\n\n    if (value === 1) return 1;\n\n    if ((value /= 0.5) < 1) return 0.5 * Math.pow(2, 10 * (value - 1));\n\n    return 0.5 * (-Math.pow(2, -10 * --value) + 2);\n  },\n\n  easeInCirc(value) {\n    return -(Math.sqrt(1 - value * value) - 1);\n  },\n\n  easeOutCirc(value) {\n    return Math.sqrt(1 - Math.pow(value - 1, 2));\n  },\n\n  easeInOutCirc(value) {\n    if ((value /= 0.5) < 1) return -0.5 * (Math.sqrt(1 - value * value) - 1);\n    return 0.5 * (Math.sqrt(1 - (value -= 2) * value) + 1);\n  },\n\n  easeInBack(value) {\n    let s = 1.70158;\n    return value * value * ((s + 1) * value - s);\n  },\n\n  easeOutBack(value) {\n    let s = 1.70158;\n    return (value = value - 1) * value * ((s + 1) * value + s) + 1;\n  },\n\n  easeInOutBack(value) {\n    let s = 1.70158;\n    if ((value /= 0.5) < 1)\n      return 0.5 * (value * value * (((s *= 1.525) + 1) * value - s));\n    return 0.5 * ((value -= 2) * value * (((s *= 1.525) + 1) * value + s) + 2);\n  },\n\n  getEasing(ease) {\n    if (typeof ease === \"function\") return ease;\n    else return this[ease] || this.easeLinear;\n  }\n};\n","import MathUtil from \"../math/MathUtil\";\n\nexport default class Vector2D {\n  constructor(x, y) {\n    this.x = x || 0;\n    this.y = y || 0;\n  }\n\n  set(x, y) {\n    this.x = x;\n    this.y = y;\n    return this;\n  }\n\n  setX(x) {\n    this.x = x;\n    return this;\n  }\n\n  setY(y) {\n    this.y = y;\n    return this;\n  }\n\n  getGradient() {\n    if (this.x !== 0) return Math.atan2(this.y, this.x);\n    else if (this.y > 0) return MathUtil.PI_2;\n    else if (this.y < 0) return -MathUtil.PI_2;\n  }\n\n  copy(v) {\n    this.x = v.x;\n    this.y = v.y;\n\n    return this;\n  }\n\n  add(v, w) {\n    if (w !== undefined) {\n      return this.addVectors(v, w);\n    }\n\n    this.x += v.x;\n    this.y += v.y;\n\n    return this;\n  }\n\n  addXY(a, b) {\n    this.x += a;\n    this.y += b;\n\n    return this;\n  }\n\n  addVectors(a, b) {\n    this.x = a.x + b.x;\n    this.y = a.y + b.y;\n\n    return this;\n  }\n\n  sub(v, w) {\n    if (w !== undefined) {\n      return this.subVectors(v, w);\n    }\n\n    this.x -= v.x;\n    this.y -= v.y;\n\n    return this;\n  }\n\n  subVectors(a, b) {\n    this.x = a.x - b.x;\n    this.y = a.y - b.y;\n\n    return this;\n  }\n\n  divideScalar(s) {\n    if (s !== 0) {\n      this.x /= s;\n      this.y /= s;\n    } else {\n      this.set(0, 0);\n    }\n\n    return this;\n  }\n\n  multiplyScalar(s) {\n    this.x *= s;\n    this.y *= s;\n\n    return this;\n  }\n\n  negate() {\n    return this.multiplyScalar(-1);\n  }\n\n  dot(v) {\n    return this.x * v.x + this.y * v.y;\n  }\n\n  lengthSq() {\n    return this.x * this.x + this.y * this.y;\n  }\n\n  length() {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  }\n\n  normalize() {\n    return this.divideScalar(this.length());\n  }\n\n  distanceTo(v) {\n    return Math.sqrt(this.distanceToSquared(v));\n  }\n\n  rotate(tha) {\n    const x = this.x;\n    const y = this.y;\n\n    this.x = x * Math.cos(tha) + y * Math.sin(tha);\n    this.y = -x * Math.sin(tha) + y * Math.cos(tha);\n\n    return this;\n  }\n\n  distanceToSquared(v) {\n    const dx = this.x - v.x;\n    const dy = this.y - v.y;\n\n    return dx * dx + dy * dy;\n  }\n\n  lerp(v, alpha) {\n    this.x += (v.x - this.x) * alpha;\n    this.y += (v.y - this.y) * alpha;\n\n    return this;\n  }\n\n  equals(v) {\n    return v.x === this.x && v.y === this.y;\n  }\n\n  clear() {\n    this.x = 0.0;\n    this.y = 0.0;\n    return this;\n  }\n\n  clone() {\n    return new Vector2D(this.x, this.y);\n  }\n}\n","import Rgb from \"../utils/Rgb\";\nimport Puid from \"../utils/Puid\";\nimport Util from \"../utils/Util\";\nimport ease from \"../math/ease\";\nimport Vector2D from \"../math/Vector2D\";\nimport MathUtil from \"../math/MathUtil\";\n\nexport default class Particle {\n  /**\n   * the Particle class\n   *\n   * @class Proton.Particle\n   * @constructor\n   * @param {Object} pObj the parameters object;\n   * for example {life:3,dead:false}\n   */\n  constructor(conf) {\n    /**\n     * The particle's id;\n     * @property id\n     * @type {string}\n     */\n    this.name = \"Particle\";\n    this.id = Puid.id(this.name);\n    this.old = {};\n    this.data = {};\n    this.behaviours = [];\n\n    this.p = new Vector2D();\n    this.v = new Vector2D();\n    this.a = new Vector2D();\n    this.old.p = new Vector2D();\n    this.old.v = new Vector2D();\n    this.old.a = new Vector2D();\n\n    this.rgb = new Rgb();\n    this.reset();\n    conf && Util.setProp(this, conf);\n  }\n\n  getDirection() {\n    return Math.atan2(this.v.x, -this.v.y) * MathUtil.N180_PI;\n  }\n\n  reset() {\n    this.life = Infinity;\n    this.age = 0;\n\n    this.dead = false;\n    this.sleep = false;\n    this.body = null;\n    this.sprite = null;\n    this.parent = null;\n\n    this.energy = 1; // Energy Loss\n    this.mass = 1;\n    this.radius = 10;\n    this.alpha = 1;\n    this.scale = 1;\n    this.rotation = 0;\n    this.color = null;\n\n    this.p.set(0, 0);\n    this.v.set(0, 0);\n    this.a.set(0, 0);\n    this.old.p.set(0, 0);\n    this.old.v.set(0, 0);\n    this.old.a.set(0, 0);\n    this.easing = ease.easeLinear;\n\n    this.rgb.reset();\n    Util.emptyObject(this.data);\n    this.removeAllBehaviours();\n\n    return this;\n  }\n\n  update(time, index) {\n    if (!this.sleep) {\n      this.age += time;\n      this.applyBehaviours(time, index);\n    }\n\n    if (this.age < this.life) {\n      const scale = this.easing(this.age / this.life);\n      this.energy = Math.max(1 - scale, 0);\n    } else {\n      this.destroy();\n    }\n  }\n\n  applyBehaviours(time, index) {\n    const length = this.behaviours.length;\n    let i;\n\n    for (i = 0; i < length; i++) {\n      this.behaviours[i] &&\n        this.behaviours[i].applyBehaviour(this, time, index);\n    }\n  }\n\n  addBehaviour(behaviour) {\n    this.behaviours.push(behaviour);\n\n    if (behaviour.hasOwnProperty(\"parents\")) behaviour.parents.push(this);\n    behaviour.initialize(this);\n  }\n\n  addBehaviours(behaviours) {\n    const length = behaviours.length;\n    let i;\n\n    for (i = 0; i < length; i++) {\n      this.addBehaviour(behaviours[i]);\n    }\n  }\n\n  removeBehaviour(behaviour) {\n    const index = this.behaviours.indexOf(behaviour);\n\n    if (index > -1) {\n      const behaviour = this.behaviours.splice(index, 1);\n      behaviour.parents = null;\n    }\n  }\n\n  removeAllBehaviours() {\n    Util.emptyArray(this.behaviours);\n  }\n\n  /**\n   * Destory this particle\n   * @method destroy\n   */\n  destroy() {\n    this.removeAllBehaviours();\n    this.energy = 0;\n    this.dead = true;\n    this.parent = null;\n  }\n}\n","export default {\n  /**\n   * @typedef  {Object} rgbObject\n   * @property {Number} r red value\n   * @property {Number} g green value\n   * @property {Number} b blue value\n   */\n  /**\n   * converts a hex value to a rgb object\n   *\n   * @memberof Proton#Proton.Util\n   * @method hexToRgb\n   *\n   * @param {String} h any hex value, e.g. #000000 or 000000 for black\n   *\n   * @return {rgbObject}\n   */\n  hexToRgb(h) {\n    const hex16 = h.charAt(0) === \"#\" ? h.substring(1, 7) : h;\n    const r = parseInt(hex16.substring(0, 2), 16);\n    const g = parseInt(hex16.substring(2, 4), 16);\n    const b = parseInt(hex16.substring(4, 6), 16);\n\n    return { r, g, b };\n  },\n\n  /**\n   * converts a rgb value to a rgb string\n   *\n   * @memberof Proton#Proton.Util\n   * @method rgbToHex\n   *\n   * @param {Object | Proton.hexToRgb} rgb a rgb object like in {@link Proton#Proton.}\n   *\n   * @return {String} rgb()\n   */\n  rgbToHex(rbg) {\n    return `rgb(${rbg.r}, ${rbg.g}, ${rbg.b})`;\n  },\n\n  getHex16FromParticle(p) {\n    return Number(p.rgb.r) * 65536 + Number(p.rgb.g) * 256 + Number(p.rgb.b);\n  }\n};\n","import Vector2D from \"./Vector2D\";\n\nexport default class Polar2D {\n  constructor(r, tha) {\n    this.r = Math.abs(r) || 0;\n    this.tha = tha || 0;\n  }\n\n  set(r, tha) {\n    this.r = r;\n    this.tha = tha;\n    return this;\n  }\n\n  setR(r) {\n    this.r = r;\n    return this;\n  }\n\n  setTha(tha) {\n    this.tha = tha;\n    return this;\n  }\n\n  copy(p) {\n    this.r = p.r;\n    this.tha = p.tha;\n    return this;\n  }\n\n  toVector() {\n    return new Vector2D(this.getX(), this.getY());\n  }\n\n  getX() {\n    return this.r * Math.sin(this.tha);\n  }\n\n  getY() {\n    return -this.r * Math.cos(this.tha);\n  }\n\n  normalize() {\n    this.r = 1;\n    return this;\n  }\n\n  equals(v) {\n    return v.r === this.r && v.tha === this.tha;\n  }\n\n  clear() {\n    this.r = 0.0;\n    this.tha = 0.0;\n    return this;\n  }\n\n  clone() {\n    return new Polar2D(this.r, this.tha);\n  }\n}\n","const Mat3 = {\n  create(mat3) {\n    const mat = new Float32Array(9);\n    if (mat3) this.set(mat3, mat);\n\n    return mat;\n  },\n\n  set(mat1, mat2) {\n    for (let i = 0; i < 9; i++) mat2[i] = mat1[i];\n\n    return mat2;\n  },\n\n  multiply(mat, mat2, mat3) {\n    let a00 = mat[0],\n      a01 = mat[1],\n      a02 = mat[2],\n      a10 = mat[3],\n      a11 = mat[4],\n      a20 = mat[6],\n      a21 = mat[7],\n      b00 = mat2[0],\n      b01 = mat2[1],\n      b02 = mat2[2],\n      b10 = mat2[3],\n      b11 = mat2[4],\n      b20 = mat2[6],\n      b21 = mat2[7];\n\n    mat3[0] = b00 * a00 + b01 * a10;\n    mat3[1] = b00 * a01 + b01 * a11;\n    mat3[2] = a02 * b02;\n    mat3[3] = b10 * a00 + b11 * a10;\n    mat3[4] = b10 * a01 + b11 * a11;\n    mat3[6] = b20 * a00 + b21 * a10 + a20;\n    mat3[7] = b20 * a01 + b21 * a11 + a21;\n\n    return mat3;\n  },\n\n  inverse(mat, mat3) {\n    let a00 = mat[0],\n      a01 = mat[1],\n      a10 = mat[3],\n      a11 = mat[4],\n      a20 = mat[6],\n      a21 = mat[7],\n      b01 = a11,\n      b11 = -a10,\n      b21 = a21 * a10 - a11 * a20,\n      d = a00 * b01 + a01 * b11,\n      id;\n\n    id = 1 / d;\n    mat3[0] = b01 * id;\n    mat3[1] = -a01 * id;\n    mat3[3] = b11 * id;\n    mat3[4] = a00 * id;\n    mat3[6] = b21 * id;\n    mat3[7] = (-a21 * a00 + a01 * a20) * id;\n\n    return mat3;\n  },\n\n  multiplyVec2(m, vec, mat3) {\n    let x = vec[0],\n      y = vec[1];\n\n    mat3[0] = x * m[0] + y * m[3] + m[6];\n    mat3[1] = x * m[1] + y * m[4] + m[7];\n\n    return mat3;\n  }\n};\n\nexport default Mat3;\n","import Span from \"./Span\";\nimport Util from \"../utils/Util\";\nimport MathUtil from \"./MathUtil\";\n\nexport default class ArraySpan extends Span {\n  constructor(color) {\n    super();\n    this._arr = Util.toArray(color);\n  }\n\n  getValue() {\n    const val = Util.getRandFromArray(this._arr);\n    return val === \"random\" || val === \"Random\" ? MathUtil.randomColor() : val;\n  }\n\n  /**\n   * Make sure that the color is an instance of Proton.ArraySpan, if not it makes a new instance\n   *\n   * @method setSpanValue\n   * @memberof Proton#Proton.Color\n   * @instance\n   *\n   * @param {Proton.Particle} particle\n   * @param {Number} the integrate time 1/ms\n   * @param {Int} the particle index\n   */\n  static createArraySpan(arr) {\n    if (!arr) return null;\n\n    if (arr instanceof ArraySpan) return arr;\n    else return new ArraySpan(arr);\n  }\n}\n","export default class Rectangle {\n  constructor(x, y, w, h) {\n    this.x = x;\n    this.y = y;\n\n    this.width = w;\n    this.height = h;\n\n    this.bottom = this.y + this.height;\n    this.right = this.x + this.width;\n  }\n\n  contains(x, y) {\n    if (x <= this.right && x >= this.x && y <= this.bottom && y >= this.y)\n      return true;\n    else return false;\n  }\n}\n","import Span from \"../math/Span\";\nimport Util from \"../utils/Util\";\n\nexport default class Rate {\n  /**\n   * The number of particles per second emission (a [particle]/b [s]);\n   * @namespace\n   * @memberof! Proton#\n   * @constructor\n   * @alias Rate\n   *\n   * @param {Array | Number | Span} numpan the number of each emission;\n   * @param {Array | Number | Span} timepan the time of each emission;\n   * for example: new Rate(new Span(10, 20), new Span(.1, .25));\n   */\n  constructor(numpan, timepan) {\n    this.numPan = Span.setSpanValue(Util.initValue(numpan, 1));\n    this.timePan = Span.setSpanValue(Util.initValue(timepan, 1));\n\n    this.startTime = 0;\n    this.nextTime = 0;\n    this.init();\n  }\n\n  init() {\n    this.startTime = 0;\n    this.nextTime = this.timePan.getValue();\n  }\n\n  getValue(time) {\n    this.startTime += time;\n\n    if (this.startTime >= this.nextTime) {\n      this.startTime = 0;\n      this.nextTime = this.timePan.getValue();\n\n      if (this.numPan.b === 1) {\n        if (this.numPan.getValue(false) > 0.5) return 1;\n        else return 0;\n      } else {\n        return this.numPan.getValue(true);\n      }\n    }\n\n    return 0;\n  }\n}\n","export default class Initialize {\n  reset() {}\n\n  init(emitter, particle) {\n    if (particle) {\n      this.initialize(particle);\n    } else {\n      this.initialize(emitter);\n    }\n  }\n\n  // sub class init\n  initialize(target) {}\n}\n","import Span from \"../math/Span\";\nimport Initialize from \"./Initialize\";\n\nexport default class Life extends Initialize {\n  constructor(a, b, c) {\n    super();\n\n    this.lifePan = Span.setSpanValue(a, b, c);\n    this.name = \"Life\";\n  }\n\n  initialize(target) {\n    if (this.lifePan.a === Infinity) target.life = Infinity;\n    else target.life = this.lifePan.getValue();\n  }\n}\n","import Vector2D from \"../math/Vector2D\";\n\nexport default class Zone {\n  constructor() {\n    this.vector = new Vector2D(0, 0);\n    this.random = 0;\n    this.crossType = \"dead\";\n    this.alert = true;\n  }\n\n  getPosition() {}\n\n  crossing(particle) {}\n}\n","import Zone from \"./Zone\";\n\nexport default class PointZone extends Zone {\n  constructor(x, y) {\n    super();\n\n    this.x = x;\n    this.y = y;\n  }\n\n  getPosition() {\n    this.vector.x = this.x;\n    this.vector.y = this.y;\n\n    return this.vector;\n  }\n\n  crossing(particle) {\n    if (this.alert) {\n      console.error(\"Sorry, PointZone does not support crossing method!\");\n      this.alert = false;\n    }\n  }\n}\n","import Util from \"../utils/Util\";\nimport PointZone from \"../zone/PointZone\";\nimport Initialize from \"./Initialize\";\n\nexport default class Position extends Initialize {\n  constructor(zone) {\n    super();\n    this.zone = Util.initValue(zone, new PointZone());\n    this.name = \"Position\";\n  }\n\n  reset(zone) {\n    this.zone = Util.initValue(zone, new PointZone());\n  }\n\n  initialize(target) {\n    this.zone.getPosition();\n\n    target.p.x = this.zone.vector.x;\n    target.p.y = this.zone.vector.y;\n  }\n}\n","import Proton from \"../core/Proton\";\nimport Span from \"../math/Span\";\nimport Util from \"../utils/Util\";\nimport Initialize from \"./Initialize\";\nimport Polar2D from \"../math/Polar2D\";\nimport MathUtil from \"../math/MathUtil\";\n\nexport default class Velocity extends Initialize {\n  constructor(rpan, thapan, type) {\n    super();\n\n    this.rPan = Span.setSpanValue(rpan);\n    this.thaPan = Span.setSpanValue(thapan);\n    this.type = Util.initValue(type, \"vector\");\n\n    this.name = \"Velocity\";\n  }\n\n  reset(rpan, thapan, type) {\n    this.rPan = Span.setSpanValue(rpan);\n    this.thaPan = Span.setSpanValue(thapan);\n    this.type = Util.initValue(type, \"vector\");\n  }\n\n  normalizeVelocity(vr) {\n    return vr * Proton.MEASURE;\n  }\n\n  initialize(target) {\n    if (this.type === \"p\" || this.type === \"P\" || this.type === \"polar\") {\n      const polar2d = new Polar2D(\n        this.normalizeVelocity(this.rPan.getValue()),\n        this.thaPan.getValue() * MathUtil.PI_180\n      );\n\n      target.v.x = polar2d.getX();\n      target.v.y = polar2d.getY();\n    } else {\n      target.v.x = this.normalizeVelocity(this.rPan.getValue());\n      target.v.y = this.normalizeVelocity(this.thaPan.getValue());\n    }\n  }\n}\n","import Span from \"../math/Span\";\nimport Initialize from \"./Initialize\";\n\nexport default class Mass extends Initialize {\n  constructor(a, b, c) {\n    super();\n    this.massPan = Span.setSpanValue(a, b, c);\n    this.name = \"Mass\";\n  }\n\n  initialize(target) {\n    target.mass = this.massPan.getValue();\n  }\n}\n","import Span from \"../math/Span\";\nimport Initialize from \"./Initialize\";\n\nexport default class Radius extends Initialize {\n  constructor(a, b, c) {\n    super();\n    this.radius = Span.setSpanValue(a, b, c);\n\n    this.name = \"Radius\";\n  }\n\n  reset(a, b, c) {\n    this.radius = Span.setSpanValue(a, b, c);\n  }\n\n  initialize(particle) {\n    particle.radius = this.radius.getValue();\n    particle.data.oldRadius = particle.radius;\n  }\n}\n","import Util from \"../utils/Util\";\nimport ArraySpan from \"../math/ArraySpan\";\nimport Initialize from \"./Initialize\";\n\nexport default class Body extends Initialize {\n  constructor(image, w, h) {\n    super();\n\n    this.image = this.setSpanValue(image);\n    this.w = Util.initValue(w, 20);\n    this.h = Util.initValue(h, this.w);\n    this.name = \"Body\";\n  }\n\n  initialize(particle) {\n    const imageTarget = this.image.getValue();\n\n    if (typeof imageTarget === \"string\") {\n      particle.body = {\n        width: this.w,\n        height: this.h,\n        src: imageTarget,\n        isInner: true,\n        inner: true\n      };\n    } else {\n      particle.body = imageTarget;\n    }\n  }\n\n  setSpanValue(image) {\n    return image instanceof ArraySpan ? image : new ArraySpan(image);\n  }\n}\n","import Proton from '../core/Proton';\nimport Util from '../utils/Util';\nimport ease from '../math/ease';\n\nexport default class Behaviour {\n    static id = 0;\n\n    /**\n     * The Behaviour class is the base for the other Behaviour\n     *\n     * @memberof! -\n     * @interface\n     * @alias Proton.Behaviour\n     *\n     * @param {Number} life \tthe behaviours life\n     * @param {String} easing \tThe behaviour's decaying trend, for example ease.easeOutQuart\n     *\n     * @property {String}  id \t\tThe behaviours id\n     * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n     * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\n     * @property {Number}  age=0 \tHow long the particle should be 'alife'\n     * @property {Number}  energy=1\n     * @property {Boolean} dead=false The particle is dead at first\n     * @property {Array}   parents \tThe behaviour's parents array\n     * @property {String}  name \tThe behaviour name\n     */\n    constructor(life, easing) {\n\n        this.life = Util.initValue(life, Infinity);\n        this.easing = ease.getEasing(easing);\n\n        this.age = 0;\n        this.energy = 1;\n        this.dead = false;\n        this.parents = [];\n\n        this.id = `Behaviour_${Behaviour.id++}`;\n        this.name = 'Behaviour';\n    }\n\n    /**\n     * Reset this behaviour's parameters\n     *\n     * @method reset\n     * @memberof Proton.Behaviour\n     * @instance\n     *\n     * @param {Number} [life=Infinity] \t\tthis behaviour's life\n     * @param {String} [easing=easeLinear] \tthis behaviour's easing\n     */\n    reset(life, easing) {\n        this.life = Util.initValue(life, Infinity);\n        this.easing = ease.getEasing(easing);\n    }\n\n    /**\n     * Normalize a force by 1:100;\n     *\n     * @method normalizeForce\n     * @memberof Proton.Behaviour\n     * @instance\n     *\n     * @param {Proton.Vector2D} force\n     */\n    normalizeForce(force) {\n        return force.multiplyScalar(Proton.MEASURE);\n    }\n\n    /**\n     * Normalize a value by 1:100;\n     *\n     * @method normalizeValue\n     * @memberof Proton.Behaviour\n     * @instance\n     *\n     * @param {Number} value\n     */\n    normalizeValue(value) {\n        return value * Proton.MEASURE;\n    }\n\n    /**\n     * Initialize the behaviour's parameters for all particles\n     *\n     * @method initialize\n     * @memberof Proton.Behaviour\n     * @instance\n     *\n     * @param {Proton.Particle} particle\n     */\n    initialize(particle) {}\n\n    /**\n     * Apply this behaviour for all particles every time\n     *\n     * @method applyBehaviour\n     * @memberof Proton.Behaviour\n     * @instance\n     *\n     * @param {Proton.Particle} particle\n     * @param {Number} \t\t\ttime the integrate time 1/ms\n     * @param {Int} \t\t\tindex the particle index\n     */\n    calculate(particle, time, index) {\n        this.age += time;\n\n        if (this.age >= this.life || this.dead) {\n            this.energy = 0;\n            this.dead = true;\n            this.destroy();\n        } else {\n            const scale = this.easing(particle.age / particle.life);\n            this.energy = Math.max(1 - scale, 0);\n        }\n    }\n\n    /**\n     * Destory this behaviour\n     *\n     * @method destroy\n     * @memberof Proton.Behaviour\n     * @instance\n     */\n    destroy() {\n        let i = this.parents.length;\n        while (i--) {\n            this.parents[i].removeBehaviour(this);\n        }\n\n        this.parents.length = 0;\n    }\n}\n","import Vector2D from '../math/Vector2D';\nimport Behaviour from './Behaviour';\n\nexport default class Force extends Behaviour {\n\n\t/**\n\t * @memberof! Proton#\n\t * @augments Proton.Behaviour\n\t * @constructor\n\t * @alias Proton.Force\n\t *\n\t * @param {Number} fx\n\t * @param {Number} fy\n\t * @param {Number} [life=Infinity] \t\t\tthis behaviour's life\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\n\t *\n\t * @property {String} name The Behaviour name\n\t */\n\tconstructor(fx, fy, life, easing) {\n\t\tsuper(life, easing);\n\n\t\tthis.force = this.normalizeForce(new Vector2D(fx, fy));\n\t\tthis.name = 'Force';\n\t}\n\n\t/**\n\t * Reset this behaviour's parameters\n\t *\n\t * @method reset\n\t * @memberof Proton#Proton.Force\n\t * @instance\n\t *\n\t * @param {Number} fx\n\t * @param {Number} fy\n\t * @param {Number} [life=Infinity] \t\t\tthis behaviour's life\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\n\t */\n\treset(fx, fy, life, easing) {\n\t\tthis.force = this.normalizeForce(new Vector2D(fx, fy));\n\n\t\tlife && super.reset(life, easing);\n\t}\n\n\t/**\n\t * Apply this behaviour for all particles every time\n\t *\n\t * @method applyBehaviour\n\t * @memberof Proton#Proton.Force\n\t * @instance\n\t *\n\t * @param {Proton.Particle} particle\n\t * @param {Number} the integrate time 1/ms\n\t * @param {Int} the particle index\n\t */\n\tapplyBehaviour(particle, time, index) {\n\t\tthis.calculate(particle, time, index);\n\t\tparticle.a.add(this.force);\n\t}\n}","import Util from \"../utils/Util\";\nimport Vector2D from \"../math/Vector2D\";\nimport Behaviour from \"./Behaviour\";\n\nexport default class Attraction extends Behaviour {\n  /**\n   * This behaviour let the particles follow one specific Proton.Vector2D\n   *\n   * @memberof! Proton#\n   * @augments Proton.Behaviour\n   * @constructor\n   * @alias Proton.Attraction\n   *\n   * @todo add description for 'force' and 'radius'\n   *\n   * @param {Proton.Vector2D} targetPosition the attraction point coordinates\n   * @param {Number} [force=100]\n   * @param {Number} [radius=1000]\n   * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n   * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\n   *\n   * @property {Proton.Vector2D} targetPosition\n   * @property {Number} radius\n   * @property {Number} force\n   * @property {Number} radiusSq\n   * @property {Proton.Vector2D} attractionForce\n   * @property {Number} lengthSq\n   * @property {String} name The Behaviour name\n   */\n  constructor(targetPosition, force, radius, life, easing) {\n    super(life, easing);\n\n    this.targetPosition = Util.initValue(targetPosition, new Vector2D());\n    this.radius = Util.initValue(radius, 1000);\n    this.force = Util.initValue(this.normalizeValue(force), 100);\n\n    this.radiusSq = this.radius * this.radius;\n    this.attractionForce = new Vector2D();\n    this.lengthSq = 0;\n\n    this.name = \"Attraction\";\n  }\n\n  /**\n   * Reset this behaviour's parameters\n   *\n   * @method reset\n   * @memberof Proton#Proton.Attraction\n   * @instance\n   *\n   * @todo add description for 'force' and 'radius'\n   *\n   * @param {Proton.Vector2D} targetPosition the attraction point coordinates\n   * @param {Number} [force=100]\n   * @param {Number} [radius=1000]\n   * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n   * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\n   */\n  reset(targetPosition, force, radius, life, easing) {\n    this.targetPosition = Util.initValue(targetPosition, new Vector2D());\n    this.radius = Util.initValue(radius, 1000);\n    this.force = Util.initValue(this.normalizeValue(force), 100);\n\n    this.radiusSq = this.radius * this.radius;\n    this.attractionForce = new Vector2D();\n    this.lengthSq = 0;\n\n    life && super.reset(life, easing);\n  }\n\n  /**\n   * Apply this behaviour for all particles every time\n   *\n   * @memberof Proton#Proton.Attraction\n   * @method applyBehaviour\n   * @instance\n   *\n   * @param {Proton.Particle} particle\n   * @param {Number} \t\t\ttime the integrate time 1/ms\n   * @param {Int} \t\t\tindex the particle index\n   */\n  applyBehaviour(particle, time, index) {\n    this.calculate(particle, time, index);\n\n    this.attractionForce.copy(this.targetPosition);\n    this.attractionForce.sub(particle.p);\n    this.lengthSq = this.attractionForce.lengthSq();\n\n    if (this.lengthSq > 0.00004 && this.lengthSq < this.radiusSq) {\n      this.attractionForce.normalize();\n      this.attractionForce.multiplyScalar(1 - this.lengthSq / this.radiusSq);\n      this.attractionForce.multiplyScalar(this.force);\n\n      particle.a.add(this.attractionForce);\n    }\n  }\n}\n","import Vector2D from \"../math/Vector2D\";\nimport MathUtil from \"../math/MathUtil\";\nimport Behaviour from \"./Behaviour\";\n\nexport default class RandomDrift extends Behaviour {\n  /**\n   * @memberof! Proton#\n   * @augments Behaviour\n   * @constructor\n   * @alias RandomDrift\n   *\n   * @param {Number} driftX \t\t\t\tX value of the new Vector2D\n   * @param {Number} driftY  \t\t\t\tY value of the new Vector2D\n   * @param {Number} delay \t\t\t\tHow much delay the drift should have\n   * @param {Number} [life=Infinity] \t\tthis behaviour's life\n   * @param {String} [easing=easeLinear] \tthis behaviour's easing\n   *\n   * @property {Number} time The time of the drift\n   * @property {String} name The Behaviour name\n   */\n  constructor(driftX, driftY, delay, life, easing) {\n    super(life, easing);\n\n    this.reset(driftX, driftY, delay);\n    this.time = 0;\n    this.name = \"RandomDrift\";\n  }\n\n  /**\n   * Reset this behaviour's parameters\n   *\n   * @method reset\n   * @memberof Proton#RandomDrift\n   * @instance\n   *\n   * @param {Number} driftX \t\t\t\tX value of the new Vector2D\n   * @param {Number} driftY  \t\t\t\tY value of the new Vector2D\n   * @param {Number} delay \t\t\t\tHow much delay the drift should have\n   * @param {Number} [life=Infinity] \t\tthis behaviour's life\n   * @param {String} [easing=easeLinear] \tthis behaviour's easing\n   */\n  reset(driftX, driftY, delay, life, easing) {\n    this.panFoce = new Vector2D(driftX, driftY);\n    this.panFoce = this.normalizeForce(this.panFoce);\n    this.delay = delay;\n\n    life && super.reset(life, easing);\n  }\n\n  initialize(particle) {\n    particle.data.time = 0;\n  }\n\n  /**\n   * Apply this behaviour for all particles every time\n   *\n   * @method applyBehaviour\n   * @memberof Proton#RandomDrift\n   * @instance\n   *\n   * @param {Particle} particle\n   * @param {Number} \t\t\ttime the integrate time 1/ms\n   * @param {Int} \t\t\tindex the particle index\n   */\n  applyBehaviour(particle, time, index) {\n    this.calculate(particle, time, index);\n    particle.data.time += time;\n\n    if (particle.data.time >= this.delay) {\n      particle.a.addXY(\n        MathUtil.randomAToB(-this.panFoce.x, this.panFoce.x),\n        MathUtil.randomAToB(-this.panFoce.y, this.panFoce.y)\n      );\n\n      particle.data.time = 0;\n    }\n  }\n}\n","import Force from './Force';\n\nexport default class Gravity extends Force {\n\n\t/**\n\t * @memberof! Proton#\n\t * @augments Proton#Proton.Force\n\t * @constructor\n\t * @alias Proton.Gravity\n\t *\n\t * @param {Number} g \t\t\t\t\t\t\tGravity\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\n\t *\n\t * @property {String} name The Behaviour name\n\t */\n\tconstructor(g, life, easing) {\n\t\tsuper(0, g, life, easing);\n\t\tthis.name = 'Gravity';\n\t}\n\n\t/**\n\t * Reset this behaviour's parameters\n\t *\n\t * @method reset\n\t * @memberof Proton#Proton.Gravity\n\t * @instance\n\t *\n\t * @param {Number} g \t\t\t\t\t\t\tGravity\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\n\t */\n\treset(g, life, easing) {\n\t\tsuper.reset(0, g, life, easing);\n\t}\n}","import Util from '../utils/Util';\nimport Vector2D from '../math/Vector2D';\nimport Behaviour from './Behaviour';\n\nexport default class Collision extends Behaviour {\n\n\t/**\n\t * The callback after collision\n\t *\n\t * @callback Callback\n\t *\n\t * @param {Proton.Particle} particle\n\t * @param {Proton.Paritcle} otherParticle\n\t */\n\t/**\n\t * @memberof! Proton#\n\t * @augments Proton.Behaviour\n\t * @constructor\n\t * @alias Proton.Collision\n\t *\n\t * @todo add description to mass\n\t *\n\t * @param {Proton.Emitter} \t[emitter=null] \t\tthe attraction point coordinates\n\t * @param {Boolean} \t\t[mass=true]\n\t * @param {Callback}\t \t[callback=null]\t\tthe callback after the collision\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\n\t *\n\t * @property {String} name The Behaviour name\n\t */\n\tconstructor(emitter, mass, callback, life, easing) {\n\t\tsuper(life, easing);\n\n\t\tthis.reset(emitter, mass, callback);\n\t\tthis.name = 'Collision';\n\t}\n\n\t/**\n\t * Reset this behaviour's parameters\n\t *\n\t * @memberof Proton#Proton.Collision\n\t * @method reset\n\t * @instance\n\t *\n\t * @todo add description to mass\n\t *\n\t * @param {Proton.Emitter} \t[emitter=null] \t\tthe attraction point coordinates\n\t * @param {Boolean} \t\t[mass=true]\n\t * @param {Callback}\t \t[callback=null]\t\tthe callback after the collision\n\t * @param {Number} \t\t\t[life=Infinity] \tthis behaviour's life\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\n\t */\n\treset(emitter, mass, callback, life, easing) {\n\t\tthis.emitter = Util.initValue(emitter, null);\n\t\tthis.mass = Util.initValue(mass, true);\n\t\tthis.callback = Util.initValue(callback, null);\n\n\t\tthis.collisionPool = [];\n\t\tthis.delta = new Vector2D();\n\n\t\tlife && super.reset(life, easing);\n\t}\n\n\t/**\n\t * Apply this behaviour for all particles every time\n\t *\n\t * @memberof Proton#Proton.Collision\n\t * @method applyBehaviour\n\t * @instance\n\t *\n\t * @param {Proton.Particle} particle\n\t * @param {Number} \t\t\ttime the integrate time 1/ms\n\t * @param {Int} \t\t\tindex the particle index\n\t */\n\tapplyBehaviour(particle, time, index) {\n\t\tconst newPool = this.emitter ? this.emitter.particles.slice(index) : this.pool.slice(index);\n\t\tconst length = newPool.length;\n\n\t\tlet otherParticle;\n\t\tlet lengthSq;\n\t\tlet overlap;\n\t\tlet totalMass;\n\t\tlet averageMass1, averageMass2;\n\t\tlet i;\n\n\t\tfor (i = 0; i < length; i++) {\n\t\t\totherParticle = newPool[i];\n\n\t\t\tif (otherParticle !== particle) {\n\t\t\t\tthis.delta.copy(otherParticle.p);\n\t\t\t\tthis.delta.sub(particle.p);\n\n\t\t\t\tlengthSq = this.delta.lengthSq();\n\t\t\t\tconst distance = particle.radius + otherParticle.radius;\n\n\t\t\t\tif (lengthSq <= distance * distance) {\n\t\t\t\t\toverlap = distance - Math.sqrt(lengthSq);\n\t\t\t\t\toverlap += 0.5;\n\n\t\t\t\t\ttotalMass = particle.mass + otherParticle.mass;\n\t\t\t\t\taverageMass1 = this.mass ? otherParticle.mass / totalMass : 0.5;\n\t\t\t\t\taverageMass2 = this.mass ? particle.mass / totalMass : 0.5;\n\n\t\t\t\t\tparticle.p.add(this.delta.clone().normalize().multiplyScalar(overlap * -averageMass1));\n\t\t\t\t\totherParticle.p.add(this.delta.normalize().multiplyScalar(overlap * averageMass2));\n\n\t\t\t\t\tthis.callback && this.callback(particle, otherParticle);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}","import Util from '../utils/Util';\nimport Behaviour from './Behaviour';\n\nexport default class CrossZone extends Behaviour {\n\n    /**\n     * Defines what happens if the particles come to the end of the specified zone\n     *\n     * @memberof! Proton#\n     * @augments Proton.Behaviour\n     * @constructor\n     * @alias Proton.CrossZone\n     *\n     * @param {Proton.Zone} zone \t\t\t\t\t\tcan be any Proton.Zone - e.g. Proton.RectZone()\n     * @param {String} \t\t[crossType=dead] \t\t\twhat happens if the particles pass the zone - allowed strings: dead | bound | cross\n     * @param {Number} \t\t[life=Infinity] \t\t\tthis behaviour's life\n     * @param {String} \t\t[easing=ease.easeLinear] \tthis behaviour's easing\n     *\n     * @property {String} name The Behaviour name\n     */\n    constructor(zone, crossType, life, easing) {\n        super(life, easing);\n\n        this.reset(zone, crossType);\n        this.name = 'CrossZone';\n    }\n\n    /**\n     * Reset this behaviour's parameters\n     *\n     * @method reset\n     * @memberof Proton#Proton.CrossZone\n     * @instance\n     *\n     * @param {Proton.Zone} zone \t\t\t\tcan be any Proton.Zone - e.g. Proton.RectZone()\n     * @param {String} \t\t[crossType=dead] \twhat happens if the particles pass the zone - allowed strings: dead | bound | cross\n     * @param {Number} \t\t[life=Infinity] \tthis behaviour's life\n     * @param {String} \t\t[easing=easeLinear]\tthis behaviour's easing\n     */\n    reset(zone, crossType, life, easing) {\n        this.zone = zone;\n        this.zone.crossType = Util.initValue(crossType, 'dead');\n\n        life && super.reset(life, easing);\n    }\n\n    /**\n     * Apply this behaviour for all particles every time\n     *\n     * @method applyBehaviour\n     * @memberof Proton#Proton.CrossZone\n     * @instance\n     *\n     * @param {Proton.Particle} particle\n     * @param {Number} the integrate time 1/ms\n     * @param {Int} the particle index\n     */\n    applyBehaviour(particle, time, index) {\n        this.calculate(particle, time, index);\n        this.zone.crossing(particle);\n    };\n}","import Util from \"../utils/Util\";\nimport Span from \"../math/Span\";\nimport Behaviour from \"./Behaviour\";\n\nexport default class Alpha extends Behaviour {\n  /**\n   * @memberof! Proton#\n   * @augments Proton.Behaviour\n   * @constructor\n   * @alias Proton.Alpha\n   *\n   * @todo add description for 'a' and 'b'\n   *\n   * @param {Number} a\n   * @param {String} b\n   * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n   * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\n   *\n   * @property {String} name The Behaviour name\n   */\n  constructor(a, b, life, easing) {\n    super(life, easing);\n\n    this.reset(a, b);\n    this.name = \"Alpha\";\n  }\n\n  /**\n   * Reset this behaviour's parameters\n   *\n   * @method reset\n   * @memberof Proton#Proton.Alpha\n   * @instance\n   *\n   * @todo add description for 'a' and 'b'\n   *\n   * @param {Number} a\n   * @param {String} b\n   * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n   * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\n   */\n  reset(a, b, life, easing) {\n    this.same = b === null || b === undefined ? true : false;\n    this.a = Span.setSpanValue(Util.initValue(a, 1));\n    this.b = Span.setSpanValue(b);\n\n    life && super.reset(life, easing);\n  }\n\n  /**\n   * Sets the new alpha value of the particle\n   *\n   * @method initialize\n   * @memberof Proton#Proton.Alpha\n   * @instance\n   *\n   * @param {Proton.Particle} particle A single Proton generated particle\n   */\n  initialize(particle) {\n    particle.data.alphaA = this.a.getValue();\n\n    if (this.same) particle.data.alphaB = particle.data.alphaA;\n    else particle.data.alphaB = this.b.getValue();\n  }\n\n  /**\n   * @method applyBehaviour\n   * @memberof Proton#Proton.Alpha\n   * @instance\n   *\n   * @param {Proton.Particle} particle\n   * @param {Number} \t\t\ttime the integrate time 1/ms\n   * @param {Int} \t\t\tindex the particle index\n   */\n  applyBehaviour(particle, time, index) {\n    this.calculate(particle, time, index);\n\n    particle.alpha =\n      particle.data.alphaB +\n      (particle.data.alphaA - particle.data.alphaB) * this.energy;\n\n    if (particle.alpha < 0.001) particle.alpha = 0;\n  }\n}\n","import Span from \"../math/Span\";\nimport Util from '../utils/Util';\nimport Behaviour from './Behaviour';\n\nexport default class Scale extends Behaviour {\n\n\t/**\n\t * @memberof! Proton#\n\t * @augments Proton.Behaviour\n\t * @constructor\n\t * @alias Proton.Scale\n\t *\n\t * @todo add description for 'a' and 'b'\n\t *\n\t * @param {Number} a\n\t * @param {String} b\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\n\t *\n\t * @property {String} name The Behaviour name\n\t */\n\tconstructor(a, b, life, easing) {\n\t\tsuper(life, easing);\n\n\t\tthis.reset(a, b);\n\t\tthis.name = 'Scale';\n\t}\n\n\t/**\n\t * Reset this behaviour's parameters\n\t *\n\t * @method reset\n\t * @memberof Proton#Proton.Scale\n\t * @instance\n\t *\n\t * @param {Number} a\n\t * @param {String} b\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\n\t */\n\treset(a, b, life, easing) {\n\t\tthis.same = b === null || b === undefined ? true : false;\n\t\tthis.a = Span.setSpanValue(Util.initValue(a, 1));\n\t\tthis.b = Span.setSpanValue(b);\n\n\t\tlife && super.reset(life, easing);\n\t}\n\n\t/**\n\t * Initialize the behaviour's parameters for all particles\n\t *\n\t * @method initialize\n\t * @memberof Proton#Proton.Scale\n\t * @instance\n\t *\n\t * @param {Proton.Particle} particle\n\t */\n\tinitialize(particle) {\n\t\tparticle.data.scaleA = this.a.getValue();\n\t\tparticle.data.oldRadius = particle.radius;\n\t\tparticle.data.scaleB = this.same ? particle.data.scaleA : this.b.getValue();\n\t};\n\n\t/**\n\t * Apply this behaviour for all particles every time\n\t *\n\t * @method applyBehaviour\n\t * @memberof Proton#Proton.Scale\n\t * @instance\n\t *\n\t * @param {Proton.Particle} particle\n\t * @param {Number} \t\t\ttime the integrate time 1/ms\n\t * @param {Int} \t\t\tindex the particle index\n\t */\n\tapplyBehaviour(particle, time, index) {\n\t\tthis.calculate(particle, time, index);\n\t\tparticle.scale = particle.data.scaleB + (particle.data.scaleA - particle.data.scaleB) * this.energy;\n\n\t\tif (particle.scale < 0.0001) particle.scale = 0;\n\t\tparticle.radius = particle.data.oldRadius * particle.scale;\n\t}\n}","import Span from \"../math/Span\";\nimport Util from '../utils/Util';\nimport Behaviour from './Behaviour';\n\nexport default class Rotate extends Behaviour {\n\n\t/**\n\t * @memberof! Proton#\n\t * @augments Proton.Behaviour\n\t * @constructor\n\t * @alias Proton.Rotate\n\t *\n\t * @todo add description for 'a', 'b' and 'style'\n\t *\n\t * @param {String} [influence=Velocity] The rotation's influence\n\t * @param {String} b\n\t * @param {String} [style=to]\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\n\t *\n\t * @property {String} name The Behaviour name\n\t */\n\tconstructor(influence, b, style, life, easing) {\n\t\tsuper(life, easing);\n\n\t\tthis.reset(influence, b, style);\n\t\tthis.name = 'Rotate';\n\t}\n\n\t/**\n\t * Reset this behaviour's parameters\n\t *\n\t * @method reset\n\t * @memberof Proton#Proton.Rotate\n\t * @instance\n\t *\n\t * @todo add description for 'a', 'b' and 'style'\n\t *\n\t * @param {String} a\n\t * @param {String} b\n\t * @param {String} [style=to]\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\n\t */\n\treset(a, b, style, life, easing) {\n\t\tthis.same = b === null || b === undefined ? true : false;\n\n\t\tthis.a = Span.setSpanValue(Util.initValue(a, 'Velocity'));\n\t\tthis.b = Span.setSpanValue(Util.initValue(b, 0));\n\t\tthis.style = Util.initValue(style, 'to');\n\n\t\tlife && super.reset(life, easing);\n\t}\n\n\t/**\n\t * Initialize the behaviour's parameters for all particles\n\t *\n\t * @method initialize\n\t * @memberof Proton#Proton.Rotate\n\t * @instance\n\t *\n\t * @param {Proton.Particle} particle\n\t */\n\tinitialize(particle) {\n\t\tparticle.rotation = this.a.getValue();\n\t\tparticle.data.rotationA = this.a.getValue();\n\n\t\tif (!this.same) particle.data.rotationB = this.b.getValue();\n\t};\n\n\t/**\n\t * Apply this behaviour for all particles every time\n\t *\n\t * @method applyBehaviour\n\t * @memberof Proton#Proton.Rotate\n\t * @instance\n\t *\n\t * @param {Proton.Particle} particle\n\t * @param {Number} \t\t\ttime the integrate time 1/ms\n\t * @param {Int} \t\t\tindex the particle index\n\t */\n\tapplyBehaviour(particle, time, index) {\n\t\tthis.calculate(particle, time, index);\n\n\t\tif (!this.same) {\n\t\t\tif (this.style === 'to' || this.style === 'TO' || this.style === '_') {\n\t\t\t\tparticle.rotation += particle.data.rotationB + (particle.data.rotationA - particle.data.rotationB) * this.energy\n\t\t\t} else {\n\t\t\t\tparticle.rotation += particle.data.rotationB;\n\t\t\t}\n\t\t} else if (this.a.a === 'V' || this.a.a === 'Velocity' || this.a.a === 'v') {\n\t\t\t// beta...\n\t\t\tparticle.rotation = particle.getDirection();\n\t\t}\n\t}\n\n}\n","import ColorUtil from \"../utils/ColorUtil\";\nimport ArraySpan from \"../math/ArraySpan\";\nimport Behaviour from \"./Behaviour\";\n\nexport default class Color extends Behaviour {\n  /**\n   * @memberof! Proton#\n   * @augments Proton.Behaviour\n   * @constructor\n   * @alias Proton.Color\n   *\n   * @param {Proton.ArraySpan | String} a the string should be a hex e.g. #000000 for black\n   * @param {Proton.ArraySpan | String} b the string should be a hex e.g. #000000 for black\n   * @param {Number} [life=Infinity] \tthis behaviour's life\n   * @param {String} [easing=easeLinear] \tthis behaviour's easing\n   *\n   * @property {String} name The Behaviour name\n   */\n  constructor(a, b, life, easing) {\n    super(life, easing);\n\n    this.reset(a, b);\n    this.name = \"Color\";\n  }\n\n  /**\n   * Reset this behaviour's parameters\n   *\n   * @method reset\n   * @memberof Proton#Proton.Color\n   * @instance\n   *\n   * @param {Proton.ArraySpan | String} a the string should be a hex e.g. #000000 for black\n   * @param {Proton.ArraySpan | String} b the string should be a hex e.g. #000000 for black\n   * @param {Number} [life=Infinity] \tthis behaviour's life\n   * @param {String} [easing=easeLinear] \tthis behaviour's easing\n   */\n  reset(a, b, life, easing) {\n    this.a = ArraySpan.createArraySpan(a);\n    this.b = ArraySpan.createArraySpan(b);\n    life && super.reset(life, easing);\n  }\n\n  /**\n   * Initialize the behaviour's parameters for all particles\n   *\n   * @method initialize\n   * @memberof Proton#Proton.Color\n   * @instance\n   *\n   * @param {Proton.Particle} particle\n   */\n  initialize(particle) {\n    particle.color = this.a.getValue();\n    particle.data.colorA = ColorUtil.hexToRgb(particle.color);\n\n    if (this.b) particle.data.colorB = ColorUtil.hexToRgb(this.b.getValue());\n  }\n\n  /**\n   * Apply this behaviour for all particles every time\n   *\n   * @method applyBehaviour\n   * @memberof Proton#Proton.Color\n   * @instance\n   *\n   * @param {Proton.Particle} particle\n   * @param {Number} the integrate time 1/ms\n   * @param {Int} the particle index\n   */\n  applyBehaviour(particle, time, index) {\n    if (this.b) {\n      this.calculate(particle, time, index);\n\n      particle.rgb.r =\n        particle.data.colorB.r +\n        (particle.data.colorA.r - particle.data.colorB.r) * this.energy;\n      particle.rgb.g =\n        particle.data.colorB.g +\n        (particle.data.colorA.g - particle.data.colorB.g) * this.energy;\n      particle.rgb.b =\n        particle.data.colorB.b +\n        (particle.data.colorA.b - particle.data.colorB.b) * this.energy;\n\n      particle.rgb.r = Math.floor(particle.rgb.r);\n      particle.rgb.g = Math.floor(particle.rgb.g);\n      particle.rgb.b = Math.floor(particle.rgb.b);\n    } else {\n      particle.rgb.r = particle.data.colorA.r;\n      particle.rgb.g = particle.data.colorA.g;\n      particle.rgb.b = particle.data.colorA.b;\n    }\n  }\n}\n","import MathUtil from \"../math/MathUtil\";\nimport Vector2D from \"../math/Vector2D\";\nimport Span from \"../math/Span\";\nimport Behaviour from \"./Behaviour\";\n\nconst CHANGING = \"changing\";\n\nexport default class Cyclone extends Behaviour {\n  /**\n   * @memberof! Proton#\n   * @augments Proton.Behaviour\n   * @constructor\n   * @alias Proton.Cyclone\n   *\n   * @param {Number} angle\n   * @param {Number} force\n   * @param {Number} [life=Infinity] \t\t\tthis behaviour's life\n   * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\n   *\n   * @property {String} name The Behaviour name\n   */\n  constructor(angle, force, life, easing) {\n    super(life, easing);\n    this.setAngleAndForce(angle, force);\n    this.name = \"Cyclone\";\n  }\n\n  setAngleAndForce(angle, force) {\n    this.force = CHANGING;\n    this.angle = MathUtil.PI / 2;\n\n    if (angle === \"right\") {\n      this.angle = MathUtil.PI / 2;\n    } else if (angle === \"left\") {\n      this.angle = -MathUtil.PI / 2;\n    } else if (angle === \"random\") {\n      this.angle = \"random\";\n    } else if (angle instanceof Span) {\n      this.angle = \"span\";\n      this.span = angle;\n    } else if (angle) {\n      this.angle = angle;\n    }\n\n    if (\n      String(force).toLowerCase() === \"changing\" ||\n      String(force).toLowerCase() === \"chang\" ||\n      String(force).toLowerCase() === \"auto\"\n    ) {\n      this.force = CHANGING;\n    } else if (force) {\n      this.force = force;\n    }\n  }\n\n  /**\n   * Reset this behaviour's parameters\n   *\n   * @method reset\n   * @memberof Proton#Proton.Cyclone\n   * @instance\n   *\n   * @param {Number} angle\n   * @param {Number} force\n   * @param {Number} [life=Infinity] \t\t\tthis behaviour's life\n   * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\n   */\n  reset(angle, force, life, easing) {\n    this.angle = MathUtil.PI / 2;\n    this.setAngleAndForce(angle, force);\n    life && super.reset(life, easing);\n  }\n\n  initialize(particle) {\n    if (this.angle === \"random\") {\n      particle.data.cangle = MathUtil.randomAToB(-MathUtil.PI, MathUtil.PI);\n    } else if (this.angle === \"span\") {\n      particle.data.cangle = this.span.getValue();\n    }\n\n    particle.data.cyclone = new Vector2D(0, 0);\n  }\n\n  /**\n   * Apply this behaviour for all particles every time\n   *\n   * @method applyBehaviour\n   * @memberof Proton#Proton.Cyclone\n   * @instance\n   *\n   * @param {Proton.Particle} particle\n   * @param {Number} the integrate time 1/ms\n   * @param {Int} the particle index\n   */\n  applyBehaviour(particle, time, index) {\n    this.calculate(particle, time, index);\n\n    let length;\n    let gradient = particle.v.getGradient();\n    if (this.angle === \"random\" || this.angle === \"span\") {\n      gradient += particle.data.cangle;\n    } else {\n      gradient += this.angle;\n    }\n\n    if (this.force === CHANGING) {\n      length = particle.v.length() / 100;\n    } else {\n      length = this.force;\n    }\n\n    particle.data.cyclone.x = length * Math.cos(gradient);\n    particle.data.cyclone.y = length * Math.sin(gradient);\n    particle.data.cyclone = this.normalizeForce(particle.data.cyclone);\n    particle.a.add(particle.data.cyclone);\n  }\n}\n","import Attraction from './Attraction';\n\nexport default class Repulsion extends Attraction {\n\n\t/**\n\t * The oppisite of Proton.Attraction - turns the force\n\t *\n\t * @memberof! Proton#\n\t * @augments Proton#Proton.Attraction\n\t * @constructor\n\t * @alias Proton.Repulsion\n\t *\n\t * @todo add description for 'force' and 'radius'\n\t *\n\t * @param {Proton.Vector2D} targetPosition the attraction point coordinates\n\t * @param {Number} [force=100]\n\t * @param {Number} [radius=1000]\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\n\t *\n\t * @property {Number} force\n\t * @property {String} name The Behaviour name\n\t */\n\tconstructor(targetPosition, force, radius, life, easing) {\n\t\tsuper(targetPosition, force, radius, life, easing);\n\n\t\tthis.force *= -1;\n\t\tthis.name = 'Repulsion';\n\t}\n\n\t/**\n\t * Reset this behaviour's parameters\n\t *\n\t * @method reset\n\t * @memberof Proton#Proton.Repulsion\n\t * @instance\n\t *\n\t * @todo add description for 'force' and 'radius'\n\t *\n\t * @param {Proton.Vector2D} targetPosition the attraction point coordinates\n\t * @param {Number} [force=100]\n\t * @param {Number} [radius=1000]\n\t * @param {Number} [life=Infinity] \t\t\t\tthis behaviour's life\n\t * @param {String} [easing=ease.easeLinear] \tthis behaviour's easing\n\t */\n\treset(targetPosition, force, radius, life, easing) {\n\t\tsuper.reset(targetPosition, force, radius, life, easing);\n\t\tthis.force *= -1;\n\t}\n}\n","import Util from '../utils/Util';\nimport Vector2D from '../math/Vector2D';\nimport Behaviour from './Behaviour';\n\nexport default class GravityWell extends Behaviour {\n\n\t/**\n\t * @memberof! Proton#\n\t * @augments Behaviour\n\t * @constructor\n\t * @alias GravityWell\n\t *\n\t * @param {Vector2D} [centerPoint=new Vector2D] The point in the center\n\t * @param {Number} [force=100]\t\t\t\t\tThe force\n\t * @param {Number} [life=Infinity]\t\t\t\tthis behaviour's life\n\t * @param {String} [easing=easeLinear]\tthis behaviour's easing\n\t *\n\t * @property {String} name The Behaviour name\n\t */\n\tconstructor(centerPoint, force, life, easing) {\n\t\tsuper(life, easing);\n\n\t\tthis.distanceVec = new Vector2D();\n\t\tthis.centerPoint = Util.initValue(centerPoint, new Vector2D);\n\t\tthis.force = Util.initValue(this.normalizeValue(force), 100);\n\n\t\tthis.name = 'GravityWell';\n\t}\n\n\t/**\n\t * Reset this behaviour's parameters\n\t *\n\t * @method reset\n\t * @memberof Proton#GravityWell\n\t * @instance\n\t *\n\t * @param {Vector2D} [centerPoint=new Vector2D] The point in the center\n\t * @param {Number} [force=100]\t\t\t\t\tThe force\n\t * @param {Number} [life=Infinity]\t\t\t\tthis behaviour's life\n\t * @param {String} [easing=easeLinear]\tthis behaviour's easing\n\t */\n\treset(centerPoint, force, life, easing) {\n\t\tthis.distanceVec = new Vector2D();\n\t\tthis.centerPoint = Util.initValue(centerPoint, new Vector2D);\n\t\tthis.force = Util.initValue(this.normalizeValue(force), 100);\n\n\t\tlife && super.reset(life, easing);\n\t};\n\n\t/**\n\t * @inheritdoc\n\t */\n\tinitialize(particle) {\n\t};\n\n\t/**\n\t * Apply this behaviour for all particles every time\n\t *\n\t * @method applyBehaviour\n\t * @memberof Proton#GravityWell\n\t * @instance\n\t *\n\t * @param {Particle} particle\n\t * @param {Number} the integrate time 1/ms\n\t * @param {Int} the particle index\n\t */\n\tapplyBehaviour(particle, time, index) {\n\t\tthis.distanceVec.set(this.centerPoint.x - particle.p.x, this.centerPoint.y - particle.p.y);\n\t\tconst distanceSq = this.distanceVec.lengthSq();\n\n\t\tif (distanceSq !== 0) {\n\t\t\tconst distance = this.distanceVec.length();\n\t\t\tconst factor = (this.force * time) / (distanceSq * distance);\n\n\t\t\tparticle.v.x += factor * this.distanceVec.x;\n\t\t\tparticle.v.y += factor * this.distanceVec.y;\n\t\t}\n\t}\n}","import Util from \"../utils/Util\";\nimport Initialize from \"./Initialize\";\nimport MathUtil from \"../math/MathUtil\";\n\nexport default {\n  initialize(emitter, particle, initializes) {\n    const length = initializes.length;\n    let i;\n\n    for (i = 0; i < length; i++) {\n      if (initializes[i] instanceof Initialize) {\n        initializes[i].init(emitter, particle);\n      } else {\n        this.init(emitter, particle, initializes[i]);\n      }\n    }\n\n    this.bindEmitter(emitter, particle);\n  },\n\n  // init\n  init(emitter, particle, initialize) {\n    Util.setProp(particle, initialize);\n    Util.setVectorVal(particle, initialize);\n  },\n\n  bindEmitter(emitter, particle) {\n    if (emitter.bindEmitter) {\n      particle.p.add(emitter.p);\n      particle.v.add(emitter.v);\n      particle.a.add(emitter.a);\n\n      particle.v.rotate(MathUtil.degreeTransform(emitter.rotation));\n    }\n  }\n};\n","import Util from \"../utils/Util\";\nimport Puid from \"../utils/Puid\";\nimport Particle from \"../core/Particle\";\nimport EventDispatcher from \"../events/EventDispatcher\";\n\nimport Rate from \"../initialize/Rate\";\nimport InitializeUtil from \"../initialize/InitializeUtil\";\n\nexport default class Emitter extends Particle {\n  /**\n   * You can use this emit particles.\n   *\n   * It will dispatch follow events:\n   * PARTICLE_CREATED\n   * PARTICLE_UPDATA\n   * PARTICLE_DEAD\n   *\n   * @class Emitter\n   * @constructor\n   * @param {Object} conf the parameters object;\n   * for example {damping:0.01,bindEmitter:false}\n   */\n  constructor(conf = {}) {\n    super(conf);\n\n    this.particles = [];\n    this.behaviours = [];\n    this.initializes = [];\n\n    this.emitTime = 0;\n    this.emitSpeed = 0;\n    this.totalTime = -1;\n\n    /**\n     * The friction coefficient for all particle emit by This;\n     * @property damping\n     * @type {Number}\n     * @default 0.006\n     */\n    this.damping = 0.006;\n\n    /**\n     * If bindEmitter the particles can bind this emitter's property;\n     * @property bindEmitter\n     * @type {Boolean}\n     * @default true\n     */\n    this.bindEmitter = true;\n\n    /**\n     * The number of particles per second emit (a [particle]/b [s]);\n     * @property rate\n     * @type {Rate}\n     * @default Rate(1, .1)\n     */\n    this.rate = new Rate(1, 0.1);\n\n    this.name = \"Emitter\";\n    this.id = Puid.id(this.name);\n  }\n\n  /**\n   * start emit particle\n   * @method emit\n   * @param {Number} emitTime begin emit time;\n   * @param {String} life the life of this emitter\n   */\n  emit(totalTime, life) {\n    this.stoped = false;\n    this.emitTime = 0;\n    this.totalTime = Util.initValue(totalTime, Infinity);\n\n    if (life === true || life === \"life\" || life === \"destroy\") {\n      this.life = totalTime === \"once\" ? 1 : this.totalTime;\n    } else if (!isNaN(life)) {\n      this.life = life;\n    }\n\n    this.rate.init();\n  }\n\n  /**\n   * stop emiting\n   * @method stop\n   */\n  stop() {\n    this.totalTime = -1;\n    this.emitTime = 0;\n    this.stoped = true;\n  }\n\n  preEmit(time) {\n    let oldStoped = this.stoped;\n    let oldEmitTime = this.emitTime;\n    let oldTotalTime = this.totalTime;\n\n    this.stoped = false;\n    this.emitTime = 0;\n    this.totalTime = time;\n    this.rate.init();\n\n    const step = 0.0167;\n    while (time > step) {\n      time -= step;\n      this.update(step);\n    }\n\n    this.stoped = oldStoped;\n    this.emitTime = oldEmitTime + Math.max(time, 0);\n    this.totalTime = oldTotalTime;\n  }\n\n  /**\n   * remove current all particles\n   * @method removeAllParticles\n   */\n  removeAllParticles() {\n    let i = this.particles.length;\n    while (i--) this.particles[i].dead = true;\n  }\n\n  /**\n   * add initialize to this emitter\n   * @method addSelfInitialize\n   */\n  addSelfInitialize(initialize) {\n    if (initialize[\"init\"]) {\n      initialize.init(this);\n    } else {\n      this.initAll();\n    }\n  }\n\n  /**\n   * add the Initialize to particles;\n   *\n   * you can use initializes array:for example emitter.addInitialize(initialize1,initialize2,initialize3);\n   * @method addInitialize\n   * @param {Initialize} initialize like this new Radius(1, 12)\n   */\n  addInitialize(...rest) {\n    let i = rest.length;\n    while (i--) this.initializes.push(rest[i]);\n  }\n\n  /**\n   * remove the Initialize\n   * @method removeInitialize\n   * @param {Initialize} initialize a initialize\n   */\n  removeInitialize(initializer) {\n    const index = this.initializes.indexOf(initializer);\n    if (index > -1) this.initializes.splice(index, 1);\n  }\n\n  /**\n   * remove all Initializes\n   * @method removeInitializers\n   */\n  removeAllInitializers() {\n    Util.emptyArray(this.initializes);\n  }\n\n  /**\n   * add the Behaviour to particles;\n   *\n   * you can use Behaviours array:emitter.addBehaviour(Behaviour1,Behaviour2,Behaviour3);\n   * @method addBehaviour\n   * @param {Behaviour} behaviour like this new Color('random')\n   */\n  addBehaviour(...rest) {\n    let i = arguments.length;\n    while (i--) {\n      let behaviour = rest[i];\n      this.behaviours.push(behaviour);\n      if (behaviour.parents) behaviour.parents.push(this);\n    }\n  }\n\n  /**\n   * remove the Behaviour\n   * @method removeBehaviour\n   * @param {Behaviour} behaviour a behaviour\n   */\n  removeBehaviour(behaviour) {\n    let index = this.behaviours.indexOf(behaviour);\n    this.behaviours.splice(index, 1);\n\n    if (behaviour.parents) {\n      index = behaviour.parents.indexOf(behaviour);\n      behaviour.parents.splice(index, 1);\n    }\n\n    return index;\n  }\n\n  /**\n   * remove all behaviours\n   * @method removeAllBehaviours\n   */\n  removeAllBehaviours() {\n    Util.emptyArray(this.behaviours);\n  }\n\n  // emitter update\n  update(time) {\n    this.age += time;\n    if (this.age >= this.life || this.dead) this.destroy();\n\n    this.emitting(time);\n    this.integrate(time);\n  }\n\n  integrate(time) {\n    if (!this.parent) return;\n\n    const damping = 1 - this.damping;\n    this.parent.integrator.calculate(this, time, damping);\n\n    const length = this.particles.length;\n    let i, particle;\n\n    for (i = length - 1; i >= 0; i--) {\n      particle = this.particles[i];\n\n      // particle update\n      particle.update(time, i);\n      this.parent.integrator.calculate(particle, time, damping);\n      this.dispatch(\"PARTICLE_UPDATE\", particle);\n\n      // check dead\n      if (particle.dead) {\n        this.dispatch(\"PARTICLE_DEAD\", particle);\n\n        this.parent.pool.expire(particle);\n        this.particles.splice(i, 1);\n      }\n    }\n  }\n\n  dispatch(event, target) {\n    this.parent && this.parent.dispatchEvent(event, target);\n    this.bindEvent && this.dispatchEvent(event, target);\n  }\n\n  emitting(time) {\n    if (this.totalTime === \"once\") {\n      let i;\n      const length = this.rate.getValue(99999);\n\n      if (length > 0) this.emitSpeed = length;\n      for (i = 0; i < length; i++) this.createParticle();\n      this.totalTime = \"none\";\n    } else {\n      this.emitTime += time;\n\n      if (this.emitTime < this.totalTime) {\n        const length = this.rate.getValue(time);\n        let i;\n\n        if (length > 0) this.emitSpeed = length;\n        for (i = 0; i < length; i++) this.createParticle();\n      }\n    }\n  }\n\n  /**\n   * create single particle;\n   *\n   * can use emit({x:10},new Gravity(10),{'particleUpdate',fun}) or emit([{x:10},new Initialize],new Gravity(10),{'particleUpdate',fun})\n   * @method removeAllParticles\n   */\n  createParticle(initialize, behaviour) {\n    const particle = this.parent.pool.get(Particle);\n    this.setupParticle(particle, initialize, behaviour);\n    this.dispatch(\"PARTICLE_CREATED\", particle);\n\n    return particle;\n  }\n\n  setupParticle(particle, initialize, behaviour) {\n    let initializes = this.initializes;\n    let behaviours = this.behaviours;\n\n    if (initialize) initializes = Util.toArray(initialize);\n    if (behaviour) behaviours = Util.toArray(behaviour);\n\n    particle.reset();\n    InitializeUtil.initialize(this, particle, initializes);\n    particle.addBehaviours(behaviours);\n    particle.parent = this;\n\n    this.particles.push(particle);\n  }\n\n  remove() {\n    this.stop();\n    Util.destroyAll(this.particles);\n  }\n\n  /**\n   * Destory this Emitter\n   * @method destroy\n   */\n  destroy() {\n    this.dead = true;\n    this.remove();\n    this.removeAllInitializers();\n    this.removeAllBehaviours();\n    this.parent && this.parent.removeEmitter(this);\n  }\n}\n\nEventDispatcher.bind(Emitter);\n","import Emitter from \"./Emitter\";\n\nexport default class BehaviourEmitter extends Emitter {\n  /**\n   * The BehaviourEmitter class inherits from Proton.Emitter\n   *\n   * use the BehaviourEmitter you can add behaviours to self;\n   * @class Proton.BehaviourEmitter\n   * @constructor\n   * @param {Object} conf the parameters object;\n   */\n  constructor(conf) {\n    super(conf);\n\n    this.selfBehaviours = [];\n  }\n\n  /**\n   * add the Behaviour to emitter;\n   *\n   * you can use Behaviours array:emitter.addSelfBehaviour(Behaviour1,Behaviour2,Behaviour3);\n   * @method addSelfBehaviour\n   * @param {Proton.Behaviour} behaviour like this new Proton.Color('random')\n   */\n  addSelfBehaviour(...rest) {\n    let i,\n      length = rest.length;\n\n    for (i = 0; i < length; i++) {\n      let behaviour = rest[i];\n      this.selfBehaviours.push(behaviour);\n      behaviour.initialize(this);\n    }\n  }\n\n  /**\n   * remove the Behaviour for self\n   * @method removeSelfBehaviour\n   * @param {Proton.Behaviour} behaviour a behaviour\n   */\n  removeSelfBehaviour(behaviour) {\n    const index = this.selfBehaviours.indexOf(behaviour);\n    if (index > -1) this.selfBehaviours.splice(index, 1);\n  }\n\n  update(time) {\n    super.update(time);\n\n    if (!this.sleep) {\n      const length = this.selfBehaviours.length;\n      let i;\n\n      for (i = 0; i < length; i++) {\n        this.selfBehaviours[i].applyBehaviour(this, time, i);\n      }\n    }\n  }\n}\n","import Util from \"../utils/Util\";\nimport Emitter from \"./Emitter\";\n\nexport default class FollowEmitter extends Emitter {\n  /**\n   * The FollowEmitter class inherits from Proton.Emitter\n   *\n   * use the FollowEmitter will emit particle when mousemoving\n   *\n   * @class Proton.FollowEmitter\n   * @constructor\n   * @param {Element} mouseTarget mouseevent's target;\n   * @param {Number} ease the easing of following speed;\n   * @default 0.7\n   * @param {Object} conf the parameters object;\n   */\n  constructor(mouseTarget, ease, conf) {\n    super(conf);\n\n    this.mouseTarget = Util.initValue(mouseTarget, window);\n    this.ease = Util.initValue(ease, 0.7);\n\n    this._allowEmitting = false;\n    this.initEventHandler();\n  }\n\n  initEventHandler() {\n    this.mousemoveHandler = e => this.mousemove.call(this, e);\n    this.mousedownHandler = e => this.mousedown.call(this, e);\n    this.mouseupHandler = e => this.mouseup.call(this, e);\n\n    this.mouseTarget.addEventListener(\n      \"mousemove\",\n      this.mousemoveHandler,\n      false\n    );\n  }\n\n  /**\n   * start emit particle\n   * @method emit\n   */\n  emit() {\n    this._allowEmitting = true;\n  }\n\n  /**\n   * stop emiting\n   * @method stop\n   */\n  stop() {\n    this._allowEmitting = false;\n  }\n\n  mousemove(e) {\n    if (e.layerX || e.layerX === 0) {\n      this.p.x += (e.layerX - this.p.x) * this.ease;\n      this.p.y += (e.layerY - this.p.y) * this.ease;\n    } else if (e.offsetX || e.offsetX === 0) {\n      this.p.x += (e.offsetX - this.p.x) * this.ease;\n      this.p.y += (e.offsetY - this.p.y) * this.ease;\n    }\n\n    if (this._allowEmitting) super.emit(\"once\");\n  }\n\n  /**\n   * Destory this Emitter\n   * @method destroy\n   */\n  destroy() {\n    super.destroy();\n    this.mouseTarget.removeEventListener(\n      \"mousemove\",\n      this.mousemoveHandler,\n      false\n    );\n  }\n}\n","import Pool from \"../core/Pool\";\n\nexport default class BaseRenderer {\n    constructor(element, stroke) {\n        this.pool = new Pool();\n        this.element = element;\n        this.stroke = stroke;\n        this.circleConf = { isCircle: true };\n\n        this.initHandler();\n        this.name = \"BaseRenderer\";\n    }\n\n    setStroke(color = \"#000000\", thinkness = 1) {\n        this.stroke = { color, thinkness };\n    }\n\n    initHandler() {\n        this._protonUpdateHandler = () => {\n            this.onProtonUpdate.call(this);\n        };\n\n        this._protonUpdateAfterHandler = () => {\n            this.onProtonUpdateAfter.call(this);\n        };\n\n        this._emitterAddedHandler = emitter => {\n            this.onEmitterAdded.call(this, emitter);\n        };\n\n        this._emitterRemovedHandler = emitter => {\n            this.onEmitterRemoved.call(this, emitter);\n        };\n\n        this._particleCreatedHandler = particle => {\n            this.onParticleCreated.call(this, particle);\n        };\n\n        this._particleUpdateHandler = particle => {\n            this.onParticleUpdate.call(this, particle);\n        };\n\n        this._particleDeadHandler = particle => {\n            this.onParticleDead.call(this, particle);\n        };\n    }\n\n    init(proton) {\n        this.parent = proton;\n\n        proton.addEventListener(\"PROTON_UPDATE\", this._protonUpdateHandler);\n        proton.addEventListener(\n            \"PROTON_UPDATE_AFTER\",\n            this._protonUpdateAfterHandler\n        );\n\n        proton.addEventListener(\"EMITTER_ADDED\", this._emitterAddedHandler);\n        proton.addEventListener(\"EMITTER_REMOVED\", this._emitterRemovedHandler);\n\n        proton.addEventListener(\n            \"PARTICLE_CREATED\",\n            this._particleCreatedHandler\n        );\n        proton.addEventListener(\"PARTICLE_UPDATE\", this._particleUpdateHandler);\n        proton.addEventListener(\"PARTICLE_DEAD\", this._particleDeadHandler);\n    }\n\n    resize(width, height) {}\n\n    destroy() {\n        this.remove();\n    }\n\n    remove(proton) {\n        this.parent.removeEventListener(\n            \"PROTON_UPDATE\",\n            this._protonUpdateHandler\n        );\n        this.parent.removeEventListener(\n            \"PROTON_UPDATE_AFTER\",\n            this._protonUpdateAfterHandler\n        );\n\n        this.parent.removeEventListener(\n            \"EMITTER_ADDED\",\n            this._emitterAddedHandler\n        );\n        this.parent.removeEventListener(\n            \"EMITTER_REMOVED\",\n            this._emitterRemovedHandler\n        );\n\n        this.parent.removeEventListener(\n            \"PARTICLE_CREATED\",\n            this._particleCreatedHandler\n        );\n        this.parent.removeEventListener(\n            \"PARTICLE_UPDATE\",\n            this._particleUpdateHandler\n        );\n        this.parent.removeEventListener(\n            \"PARTICLE_DEAD\",\n            this._particleDeadHandler\n        );\n\n        this.parent = null;\n    }\n\n    onProtonUpdate() {}\n    onProtonUpdateAfter() {}\n\n    onEmitterAdded(emitter) {}\n    onEmitterRemoved(emitter) {}\n\n    onParticleCreated(particle) {}\n    onParticleUpdate(particle) {}\n    onParticleDead(particle) {}\n}\n","import ImgUtil from \"../utils/ImgUtil\";\nimport ColorUtil from \"../utils/ColorUtil\";\nimport MathUtil from \"../math/MathUtil\";\nimport BaseRenderer from \"./BaseRenderer\";\n\nexport default class CanvasRenderer extends BaseRenderer {\n    constructor(element) {\n        super(element);\n\n        this.stroke = null;\n        this.context = this.element.getContext(\"2d\");\n        this.bufferCache = {};\n        this.name = \"CanvasRenderer\";\n    }\n\n    resize(width, height) {\n        this.element.width = width;\n        this.element.height = height;\n    }\n\n    onProtonUpdate() {\n        this.context.clearRect(0, 0, this.element.width, this.element.height);\n    }\n\n    onParticleCreated(particle) {\n        if (particle.body) {\n            ImgUtil.getImgFromCache(particle.body, this.addImg2Body, particle);\n        } else {\n            particle.color = particle.color || \"#ff0000\";\n        }\n    }\n\n    onParticleUpdate(particle) {\n        if (particle.body) {\n            if (particle.body instanceof Image) this.drawImage(particle);\n        } else {\n            this.drawCircle(particle);\n        }\n    }\n\n    onParticleDead(particle) {\n        particle.body = null;\n    }\n\n    // private\n    addImg2Body(img, particle) {\n        particle.body = img;\n    }\n\n    // private drawCircle\n    drawImage(particle) {\n        const w = (particle.body.width * particle.scale) | 0;\n        const h = (particle.body.height * particle.scale) | 0;\n        const x = particle.p.x - w / 2;\n        const y = particle.p.y - h / 2;\n\n        if (!!particle.color) {\n            if (!particle.data[\"buffer\"])\n                particle.data.buffer = this.createBuffer(particle.body);\n\n            const bufContext = particle.data.buffer.getContext(\"2d\");\n            bufContext.clearRect(\n                0,\n                0,\n                particle.data.buffer.width,\n                particle.data.buffer.height\n            );\n            bufContext.globalAlpha = particle.alpha;\n            bufContext.drawImage(particle.body, 0, 0);\n\n            bufContext.globalCompositeOperation = \"source-atop\";\n            bufContext.fillStyle = ColorUtil.rgbToHex(particle.rgb);\n            bufContext.fillRect(\n                0,\n                0,\n                particle.data.buffer.width,\n                particle.data.buffer.height\n            );\n            bufContext.globalCompositeOperation = \"source-over\";\n            bufContext.globalAlpha = 1;\n\n            this.context.drawImage(\n                particle.data.buffer,\n                0,\n                0,\n                particle.data.buffer.width,\n                particle.data.buffer.height,\n                x,\n                y,\n                w,\n                h\n            );\n        } else {\n            this.context.save();\n\n            this.context.globalAlpha = particle.alpha;\n            this.context.translate(particle.p.x, particle.p.y);\n            this.context.rotate(MathUtil.degreeTransform(particle.rotation));\n            this.context.translate(-particle.p.x, -particle.p.y);\n            this.context.drawImage(\n                particle.body,\n                0,\n                0,\n                particle.body.width,\n                particle.body.height,\n                x,\n                y,\n                w,\n                h\n            );\n\n            this.context.globalAlpha = 1;\n            this.context.restore();\n        }\n    }\n\n    // private drawCircle --\n    drawCircle(particle) {\n        if (particle.rgb) {\n            this.context.fillStyle = `rgba(${particle.rgb.r},${particle.rgb.g},${particle.rgb.b},${particle.alpha})`;\n        } else {\n            this.context.fillStyle = particle.color;\n        }\n\n        // draw circle\n        this.context.beginPath();\n        this.context.arc(\n            particle.p.x,\n            particle.p.y,\n            particle.radius,\n            0,\n            Math.PI * 2,\n            true\n        );\n\n        if (this.stroke) {\n            this.context.strokeStyle = this.stroke.color;\n            this.context.lineWidth = this.stroke.thinkness;\n            this.context.stroke();\n        }\n\n        this.context.closePath();\n        this.context.fill();\n    }\n\n    // private createBuffer\n    createBuffer(image) {\n        if (image instanceof Image) {\n            const size = image.width + \"_\" + image.height;\n            let canvas = this.bufferCache[size];\n\n            if (!canvas) {\n                canvas = document.createElement(\"canvas\");\n                canvas.width = image.width;\n                canvas.height = image.height;\n                this.bufferCache[size] = canvas;\n            }\n\n            return canvas;\n        }\n    }\n}\n","import DomUtil from \"../utils/DomUtil\";\nimport ImgUtil from \"../utils/ImgUtil\";\nimport BaseRenderer from \"./BaseRenderer\";\n\nexport default class DomRenderer extends BaseRenderer {\n  constructor(element) {\n    super(element);\n\n    this.stroke = null;\n    this.pool.create = (body, particle) => this.createBody(body, particle);\n    this.addImg2Body = this.addImg2Body.bind(this);\n\n    this.transform3d = false;\n    this.name = \"DomRenderer\";\n  }\n\n  onParticleCreated(particle) {\n    if (particle.body) {\n      ImgUtil.getImgFromCache(particle.body, this.addImg2Body, particle);\n    } else {\n      particle.body = this.pool.get(this.circleConf, particle);\n      this.element.appendChild(particle.body);\n    }\n  }\n\n  onParticleUpdate(particle) {\n    if (this.bodyReady(particle)) {\n      if (this.transform3d)\n        DomUtil.transform3d(\n          particle.body,\n          particle.p.x,\n          particle.p.y,\n          particle.scale,\n          particle.rotation\n        );\n      else\n        DomUtil.transform(\n          particle.body,\n          particle.p.x,\n          particle.p.y,\n          particle.scale,\n          particle.rotation\n        );\n\n      particle.body.style.opacity = particle.alpha;\n      if (particle.body.isCircle) {\n        particle.body.style.backgroundColor = particle.color || \"#ff0000\";\n      }\n    }\n  }\n\n  onParticleDead(particle) {\n    if (this.bodyReady(particle)) {\n      this.element.removeChild(particle.body);\n      this.pool.expire(particle.body);\n      particle.body = null;\n    }\n  }\n\n  bodyReady(particle) {\n    return (\n      typeof particle.body === \"object\" &&\n      particle.body &&\n      !particle.body.isInner\n    );\n  }\n\n  // private\n  addImg2Body(img, particle) {\n    if (particle.dead) return;\n    particle.body = this.pool.get(img, particle);\n    DomUtil.resize(particle.body, img.width, img.height);\n\n    this.element.appendChild(particle.body);\n  }\n\n  createBody(body, particle) {\n    if (body.isCircle) return this.createCircle(particle);\n    else return this.createSprite(body, particle);\n  }\n\n  // private --\n  createCircle(particle) {\n    const dom = DomUtil.createDiv(\n      `${particle.id}_dom`,\n      2 * particle.radius,\n      2 * particle.radius\n    );\n    dom.style.borderRadius = `${particle.radius}px`;\n\n    if (this.stroke) {\n      dom.style.borderColor = this.stroke.color;\n      dom.style.borderWidth = `${this.stroke.thinkness}px`;\n    }\n    dom.isCircle = true;\n\n    return dom;\n  }\n\n  createSprite(body, particle) {\n    const url = typeof body === \"string\" ? body : body.src;\n    const dom = DomUtil.createDiv(\n      `${particle.id}_dom`,\n      body.width,\n      body.height\n    );\n    dom.style.backgroundImage = `url(${url})`;\n\n    return dom;\n  }\n}\n","import BaseRenderer from \"./BaseRenderer\";\n\nexport default class EaselRenderer extends BaseRenderer {\n  constructor(element, stroke) {\n    super(element);\n\n    this.stroke = stroke;\n    this.name = \"EaselRenderer\";\n  }\n\n  onParticleCreated(particle) {\n    if (particle.body) {\n      this.createSprite(particle);\n    } else {\n      this.createCircle(particle);\n    }\n\n    this.element.addChild(particle.body);\n  }\n\n  onParticleUpdate(particle) {\n    if (particle.body) {\n      particle.body.x = particle.p.x;\n      particle.body.y = particle.p.y;\n\n      particle.body.alpha = particle.alpha;\n      particle.body.scaleX = particle.body.scaleY = particle.scale;\n      particle.body.rotation = particle.rotation;\n    }\n  }\n\n  onParticleDead(particle) {\n    if (particle.body) {\n      particle.body.parent && particle.body.parent.removeChild(particle.body);\n      this.pool.expire(particle.body);\n      particle.body = null;\n    }\n\n    if (particle.graphics) this.pool.expire(particle.graphics);\n  }\n\n  // private\n  createSprite(particle) {\n    particle.body = this.pool.get(particle.body);\n\n    if (particle.body.parent) return;\n    if (particle.body[\"image\"]) {\n      particle.body.regX = particle.body.image.width / 2;\n      particle.body.regY = particle.body.image.height / 2;\n    }\n  }\n\n  createCircle(particle) {\n    const graphics = this.pool.get(createjs.Graphics);\n\n    if (this.stroke) {\n      if (this.stroke instanceof String) graphics.beginStroke(this.stroke);\n      else graphics.beginStroke(\"#000000\");\n    }\n    graphics\n      .beginFill(particle.color || \"#ff0000\")\n      .drawCircle(0, 0, particle.radius);\n\n    const shape = this.pool.get(createjs.Shape, [graphics]);\n\n    particle.body = shape;\n    particle.graphics = graphics;\n  }\n}\n","import Rectangle from \"../math/Rectangle\";\nimport BaseRenderer from \"./BaseRenderer\";\n\nexport default class PixelRenderer extends BaseRenderer {\n  constructor(element, rectangle) {\n    super(element);\n\n    this.context = this.element.getContext(\"2d\");\n    this.imageData = null;\n    this.rectangle = null;\n    this.rectangle = rectangle;\n    this.createImageData(rectangle);\n\n    this.name = \"PixelRenderer\";\n  }\n\n  resize(width, height) {\n    this.element.width = width;\n    this.element.height = height;\n  }\n\n  createImageData(rectangle) {\n    this.rectangle = rectangle\n      ? rectangle\n      : new Rectangle(0, 0, this.element.width, this.element.height);\n    this.imageData = this.context.createImageData(\n      this.rectangle.width,\n      this.rectangle.height\n    );\n    this.context.putImageData(\n      this.imageData,\n      this.rectangle.x,\n      this.rectangle.y\n    );\n  }\n\n  onProtonUpdate() {\n    this.context.clearRect(\n      this.rectangle.x,\n      this.rectangle.y,\n      this.rectangle.width,\n      this.rectangle.height\n    );\n    this.imageData = this.context.getImageData(\n      this.rectangle.x,\n      this.rectangle.y,\n      this.rectangle.width,\n      this.rectangle.height\n    );\n  }\n\n  onProtonUpdateAfter() {\n    this.context.putImageData(\n      this.imageData,\n      this.rectangle.x,\n      this.rectangle.y\n    );\n  }\n\n  onParticleCreated(particle) {}\n\n  onParticleUpdate(particle) {\n    if (this.imageData) {\n      this.setPixel(\n        this.imageData,\n        Math.floor(particle.p.x - this.rectangle.x),\n        Math.floor(particle.p.y - this.rectangle.y),\n        particle\n      );\n    }\n  }\n\n  setPixel(imagedata, x, y, particle) {\n    const rgb = particle.rgb;\n    if (x < 0 || x > this.element.width || y < 0 || y > this.elementwidth)\n      return;\n\n    const i = ((y >> 0) * imagedata.width + (x >> 0)) * 4;\n\n    imagedata.data[i] = rgb.r;\n    imagedata.data[i + 1] = rgb.g;\n    imagedata.data[i + 2] = rgb.b;\n    imagedata.data[i + 3] = particle.alpha * 255;\n  }\n\n  onParticleDead(particle) {}\n}\n","import ColorUtil from \"../utils/ColorUtil\";\nimport MathUtil from \"../math/MathUtil\";\nimport BaseRenderer from \"./BaseRenderer\";\n\nlet PIXIClass;\nexport default class PixiRenderer extends BaseRenderer {\n  constructor(element, stroke) {\n    super(element);\n\n    this.stroke = stroke;\n    this.color = false;\n    this.setColor = false;\n    this.blendMode = null;\n    this.pool.create = (body, particle) => this.createBody(body, particle);\n    this.setPIXI(window.PIXI);\n\n    this.name = \"PixiRenderer\";\n  }\n\n  setPIXI(PIXI) {\n    try {\n      PIXIClass = PIXI || { Sprite: {} };\n      this.createFromImage =\n        PIXIClass.Sprite.from || PIXIClass.Sprite.fromImage;\n    } catch (e) {}\n  }\n\n  onProtonUpdate() {}\n\n  /**\n   * @param particle\n   */\n  onParticleCreated(particle) {\n    if (particle.body) {\n      particle.body = this.pool.get(particle.body, particle);\n    } else {\n      particle.body = this.pool.get(this.circleConf, particle);\n    }\n\n    if (this.blendMode) {\n      particle.body.blendMode = this.blendMode;\n    }\n\n    this.element.addChild(particle.body);\n  }\n\n  /**\n   * @param particle\n   */\n  onParticleUpdate(particle) {\n    this.transform(particle, particle.body);\n\n    if (this.setColor === true || this.color === true) {\n      particle.body.tint = ColorUtil.getHex16FromParticle(particle);\n    }\n  }\n\n  /**\n   * @param particle\n   */\n  onParticleDead(particle) {\n    this.element.removeChild(particle.body);\n    this.pool.expire(particle.body);\n    particle.body = null;\n  }\n\n  destroy(particles) {\n    super.destroy();\n    this.pool.destroy();\n\n    let i = particles.length;\n    while (i--) {\n      let particle = particles[i];\n      if (particle.body) {\n        this.element.removeChild(particle.body);\n      }\n    }\n  }\n\n  transform(particle, target) {\n    target.x = particle.p.x;\n    target.y = particle.p.y;\n\n    target.alpha = particle.alpha;\n\n    target.scale.x = particle.scale;\n    target.scale.y = particle.scale;\n\n    // using cached version of MathUtil.PI_180 for slight performance increase.\n    target.rotation = particle.rotation * MathUtil.PI_180; // MathUtil.PI_180;\n  }\n\n  createBody(body, particle) {\n    if (body.isCircle) return this.createCircle(particle);\n    else return this.createSprite(body);\n  }\n\n  createSprite(body) {\n    const sprite = body.isInner\n      ? this.createFromImage(body.src)\n      : new PIXIClass.Sprite(body);\n\n    sprite.anchor.x = 0.5;\n    sprite.anchor.y = 0.5;\n\n    return sprite;\n  }\n\n  createCircle(particle) {\n    const graphics = new PIXIClass.Graphics();\n\n    if (this.stroke) {\n      const stroke = this.stroke instanceof String ? this.stroke : 0x000000;\n      graphics.beginStroke(stroke);\n    }\n\n    graphics.beginFill(particle.color || 0x008ced);\n    graphics.drawCircle(0, 0, particle.radius);\n    graphics.endFill();\n\n    return graphics;\n  }\n}\n","import Mat3 from \"../math/Mat3\";\n\nexport default class MStack {\n  constructor() {\n    this.mats = [];\n    this.size = 0;\n\n    for (let i = 0; i < 20; i++)\n      this.mats.push(Mat3.create([0, 0, 0, 0, 0, 0, 0, 0, 0]));\n  }\n\n  set(m, i) {\n    if (i === 0) Mat3.set(m, this.mats[0]);\n    else Mat3.multiply(this.mats[i - 1], m, this.mats[i]);\n\n    this.size = Math.max(this.size, i + 1);\n  }\n\n  push(m) {\n    if (this.size === 0) Mat3.set(m, this.mats[0]);\n    else Mat3.multiply(this.mats[this.size - 1], m, this.mats[this.size]);\n\n    this.size++;\n  }\n\n  pop() {\n    if (this.size > 0) this.size--;\n  }\n\n  top() {\n    return this.mats[this.size - 1];\n  }\n}\n","import Mat3 from '../math/Mat3';\nimport BaseRenderer from './BaseRenderer';\n\nimport Util from '../utils/Util';\nimport ImgUtil from '../utils/ImgUtil';\nimport MStack from '../utils/MStack';\nimport DomUtil from '../utils/DomUtil';\nimport WebGLUtil from '../utils/WebGLUtil';\nimport MathUtil from '../math/MathUtil';\n\nexport default class WebGLRenderer extends BaseRenderer {\n\n    constructor(element) {\n        super(element);\n\n        this.gl = this.element.getContext('experimental-webgl', { antialias: true, stencil: false, depth: false });\n        if (!this.gl) alert('Sorry your browser do not suppest WebGL!');\n\n        this.initVar();\n        this.setMaxRadius();\n        this.initShaders();\n        this.initBuffers();\n\n        this.gl.blendEquation(this.gl.FUNC_ADD);\n        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n        this.gl.enable(this.gl.BLEND);\n\n        this.addImg2Body = this.addImg2Body.bind(this);\n\n        this.name = 'WebGLRenderer';\n    }\n\n    init(proton) {\n        super.init(proton);\n        this.resize(this.element.width, this.element.height);\n    }\n\n    resize(width, height) {\n        this.umat[4] = -2;\n        this.umat[7] = 1;\n\n        this.smat[0] = 1 / width;\n        this.smat[4] = 1 / height;\n\n        this.mstack.set(this.umat, 0);\n        this.mstack.set(this.smat, 1);\n\n        this.gl.viewport(0, 0, width, height);\n        this.element.width = width;\n        this.element.height = height;\n    }\n\n    setMaxRadius(radius) {\n        this.circleCanvasURL = this.createCircle(radius);\n    }\n\n    getVertexShader() {\n        const vsSource = ['uniform vec2 viewport;', 'attribute vec2 aVertexPosition;', 'attribute vec2 aTextureCoord;', 'uniform mat3 tMat;', 'varying vec2 vTextureCoord;', 'varying float alpha;', 'void main() {', 'vec3 v = tMat * vec3(aVertexPosition, 1.0);', 'gl_Position = vec4(v.x, v.y, 0, 1);', 'vTextureCoord = aTextureCoord;', 'alpha = tMat[0][2];', '}'].join('\\n');\n        return vsSource;\n    }\n\n    getFragmentShader() {\n        const fsSource = ['precision mediump float;', 'varying vec2 vTextureCoord;', 'varying float alpha;', 'uniform sampler2D uSampler;', 'uniform vec4 color;', 'uniform bool useTexture;', 'uniform vec3 uColor;', 'void main() {', 'vec4 textureColor = texture2D(uSampler, vTextureCoord);', 'gl_FragColor = textureColor * vec4(uColor, 1.0);', 'gl_FragColor.w *= alpha;', '}'].join('\\n');\n        return fsSource;\n    }\n\n    initVar() {\n        this.mstack = new MStack();\n        this.umat = Mat3.create([2, 0, 1, 0, -2, 0, -1, 1, 1]);\n        this.smat = Mat3.create([1 / 100, 0, 1, 0, 1 / 100, 0, 0, 0, 1]);\n        this.texturebuffers = {};\n    }\n\n    blendEquation(A) {\n        this.gl.blendEquation(this.gl[A]);\n    }\n\n    blendFunc(A, B) {\n        this.gl.blendFunc(this.gl[A], this.gl[B]);\n    }\n\n    getShader(gl, str, fs) {\n        const shader = fs ? gl.createShader(gl.FRAGMENT_SHADER) : gl.createShader(gl.VERTEX_SHADER);\n\n        gl.shaderSource(shader, str);\n        gl.compileShader(shader);\n\n        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n            alert(gl.getShaderInfoLog(shader));\n            return null;\n        }\n\n        return shader;\n    }\n\n    initShaders() {\n        const fragmentShader = this.getShader(this.gl, this.getFragmentShader(), true);\n        const vertexShader = this.getShader(this.gl, this.getVertexShader(), false);\n\n        this.sprogram = this.gl.createProgram();\n        this.gl.attachShader(this.sprogram, vertexShader);\n        this.gl.attachShader(this.sprogram, fragmentShader);\n        this.gl.linkProgram(this.sprogram);\n\n        if (!this.gl.getProgramParameter(this.sprogram, this.gl.LINK_STATUS))\n            alert('Could not initialise shaders');\n\n        this.gl.useProgram(this.sprogram);\n        this.sprogram.vpa = this.gl.getAttribLocation(this.sprogram, 'aVertexPosition');\n        this.sprogram.tca = this.gl.getAttribLocation(this.sprogram, 'aTextureCoord');\n        this.gl.enableVertexAttribArray(this.sprogram.tca);\n        this.gl.enableVertexAttribArray(this.sprogram.vpa);\n\n        this.sprogram.tMatUniform = this.gl.getUniformLocation(this.sprogram, 'tMat');\n        this.sprogram.samplerUniform = this.gl.getUniformLocation(this.sprogram, 'uSampler');\n        this.sprogram.useTex = this.gl.getUniformLocation(this.sprogram, 'useTexture');\n        this.sprogram.color = this.gl.getUniformLocation(this.sprogram, 'uColor');\n        this.gl.uniform1i(this.sprogram.useTex, 1);\n    };\n\n    initBuffers() {\n        const vs = [0, 3, 1, 0, 2, 3];\n        let idx;\n\n        this.unitIBuffer = this.gl.createBuffer();\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.unitIBuffer);\n        this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(vs), this.gl.STATIC_DRAW);\n\n        let i;\n        let ids = [];\n        for (i = 0; i < 100; i++) ids.push(i);\n        idx = new Uint16Array(ids);\n\n        this.unitI33 = this.gl.createBuffer();\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.unitI33);\n        this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, idx, this.gl.STATIC_DRAW);\n\n        ids = [];\n        for (i = 0; i < 100; i++) ids.push(i, i + 1, i + 2);\n        idx = new Uint16Array(ids);\n\n        this.stripBuffer = this.gl.createBuffer();\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.stripBuffer);\n        this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, idx, this.gl.STATIC_DRAW);\n    };\n\n    createCircle(raidus) {\n        this.circleCanvasRadius = WebGLUtil.nhpot(Util.initValue(raidus, 32));\n        const canvas = DomUtil.createCanvas('circle_canvas', this.circleCanvasRadius * 2, this.circleCanvasRadius * 2);\n        const context = canvas.getContext('2d');\n\n        context.beginPath();\n        context.arc(this.circleCanvasRadius, this.circleCanvasRadius, this.circleCanvasRadius, 0, Math.PI * 2, true);\n        context.closePath();\n        context.fillStyle = '#FFF';\n        context.fill();\n\n        return canvas.toDataURL();\n    };\n\n    drawImg2Canvas(particle) {\n        const _w = particle.body.width;\n        const _h = particle.body.height;\n\n        const _width = WebGLUtil.nhpot(particle.body.width);\n        const _height = WebGLUtil.nhpot(particle.body.height);\n\n        const _scaleX = particle.body.width / _width;\n        const _scaleY = particle.body.height / _height;\n\n        if (!this.texturebuffers[particle.data.src])\n            this.texturebuffers[particle.data.src] = [this.gl.createTexture(), this.gl.createBuffer(), this.gl.createBuffer()];\n\n        particle.data.texture = this.texturebuffers[particle.data.src][0];\n        particle.data.vcBuffer = this.texturebuffers[particle.data.src][1];\n        particle.data.tcBuffer = this.texturebuffers[particle.data.src][2];\n\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, particle.data.tcBuffer);\n        this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array([0.0, 0.0, _scaleX, 0.0, 0.0, _scaleY, _scaleY, _scaleY]), this.gl.STATIC_DRAW);\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, particle.data.vcBuffer);\n        this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array([0.0, 0.0, _w, 0.0, 0.0, _h, _w, _h]), this.gl.STATIC_DRAW);\n\n        const context = particle.data.canvas.getContext('2d');\n        const data = context.getImageData(0, 0, _width, _height);\n\n        this.gl.bindTexture(this.gl.TEXTURE_2D, particle.data.texture);\n        this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.gl.RGBA, this.gl.UNSIGNED_BYTE, data);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR_MIPMAP_NEAREST);\n        this.gl.generateMipmap(this.gl.TEXTURE_2D);\n\n        particle.data.textureLoaded = true;\n        particle.data.textureWidth = _w;\n        particle.data.textureHeight = _h;\n    }\n\n    onProtonUpdate() {\n        // this.gl.clearColor(0, 0, 0, 1);\n        // this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);\n    }\n\n    onParticleCreated(particle) {\n        particle.data.textureLoaded = false;\n        particle.data.tmat = Mat3.create();\n        particle.data.tmat[8] = 1;\n        particle.data.imat = Mat3.create();\n        particle.data.imat[8] = 1;\n\n        if (particle.body) {\n            ImgUtil.getImgFromCache(particle.body, this.addImg2Body, particle);\n        } else {\n            ImgUtil.getImgFromCache(this.circleCanvasURL, this.addImg2Body, particle);\n            particle.data.oldScale = particle.radius / this.circleCanvasRadius;\n        }\n    }\n\n    // private\n    addImg2Body(img, particle) {\n        if (particle.dead) return;\n        particle.body = img;\n        particle.data.src = img.src;\n        particle.data.canvas = ImgUtil.getCanvasFromCache(img);\n        particle.data.oldScale = 1;\n\n        this.drawImg2Canvas(particle);\n    }\n\n    onParticleUpdate(particle) {\n        if (particle.data.textureLoaded) {\n            this.updateMatrix(particle);\n\n            this.gl.uniform3f(this.sprogram.color, particle.rgb.r / 255, particle.rgb.g / 255, particle.rgb.b / 255);\n            this.gl.uniformMatrix3fv(this.sprogram.tMatUniform, false, this.mstack.top());\n\n            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, particle.data.vcBuffer);\n            this.gl.vertexAttribPointer(this.sprogram.vpa, 2, this.gl.FLOAT, false, 0, 0);\n            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, particle.data.tcBuffer);\n            this.gl.vertexAttribPointer(this.sprogram.tca, 2, this.gl.FLOAT, false, 0, 0);\n            this.gl.bindTexture(this.gl.TEXTURE_2D, particle.data.texture);\n            this.gl.uniform1i(this.sprogram.samplerUniform, 0);\n            this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.unitIBuffer);\n\n            this.gl.drawElements(this.gl.TRIANGLES, 6, this.gl.UNSIGNED_SHORT, 0);\n\n            this.mstack.pop();\n        }\n    }\n\n    onParticleDead(particle) { }\n\n    updateMatrix(particle) {\n        const moveOriginMatrix = WebGLUtil.makeTranslation(-particle.data.textureWidth / 2, -particle.data.textureHeight / 2);\n        const translationMatrix = WebGLUtil.makeTranslation(particle.p.x, particle.p.y);\n\n        const angel = particle.rotation * (MathUtil.PI_180);\n        const rotationMatrix = WebGLUtil.makeRotation(angel);\n\n        const scale = particle.scale * particle.data.oldScale;\n        const scaleMatrix = WebGLUtil.makeScale(scale, scale);\n        let matrix = WebGLUtil.matrixMultiply(moveOriginMatrix, scaleMatrix);\n\n        matrix = WebGLUtil.matrixMultiply(matrix, rotationMatrix);\n        matrix = WebGLUtil.matrixMultiply(matrix, translationMatrix);\n\n        Mat3.inverse(matrix, particle.data.imat);\n        matrix[2] = particle.alpha;\n\n        this.mstack.push(matrix);\n    }\n}","import BaseRenderer from \"./BaseRenderer\";\n\nexport default class CustomRenderer extends BaseRenderer {\n  constructor(element) {\n    super(element);\n\n    this.name = \"CustomRenderer\";\n  }\n}\n","import Zone from \"./Zone\";\nimport Util from \"../utils/Util\";\nimport MathUtil from \"../math/MathUtil\";\n\nexport default class LineZone extends Zone {\n  constructor(x1, y1, x2, y2, direction) {\n    super();\n\n    if (x2 - x1 >= 0) {\n      this.x1 = x1;\n      this.y1 = y1;\n      this.x2 = x2;\n      this.y2 = y2;\n    } else {\n      this.x1 = x2;\n      this.y1 = y2;\n      this.x2 = x1;\n      this.y2 = y1;\n    }\n\n    this.dx = this.x2 - this.x1;\n    this.dy = this.y2 - this.y1;\n\n    this.minx = Math.min(this.x1, this.x2);\n    this.miny = Math.min(this.y1, this.y2);\n    this.maxx = Math.max(this.x1, this.x2);\n    this.maxy = Math.max(this.y1, this.y2);\n\n    this.dot = this.x2 * this.y1 - this.x1 * this.y2;\n    this.xxyy = this.dx * this.dx + this.dy * this.dy;\n\n    this.gradient = this.getGradient();\n    this.length = this.getLength();\n    this.direction = Util.initValue(direction, \">\");\n  }\n\n  getPosition() {\n    this.random = Math.random();\n\n    this.vector.x =\n      this.x1 + this.random * this.length * Math.cos(this.gradient);\n    this.vector.y =\n      this.y1 + this.random * this.length * Math.sin(this.gradient);\n\n    return this.vector;\n  }\n\n  getDirection(x, y) {\n    const A = this.dy;\n    const B = -this.dx;\n    const C = this.dot;\n    const D = B === 0 ? 1 : B;\n\n    if ((A * x + B * y + C) * D > 0) return true;\n    else return false;\n  }\n\n  getDistance(x, y) {\n    const A = this.dy;\n    const B = -this.dx;\n    const C = this.dot;\n    const D = A * x + B * y + C;\n\n    return D / Math.sqrt(this.xxyy);\n  }\n\n  getSymmetric(v) {\n    const tha2 = v.getGradient();\n    const tha1 = this.getGradient();\n    const tha = 2 * (tha1 - tha2);\n\n    const oldx = v.x;\n    const oldy = v.y;\n\n    v.x = oldx * Math.cos(tha) - oldy * Math.sin(tha);\n    v.y = oldx * Math.sin(tha) + oldy * Math.cos(tha);\n\n    return v;\n  }\n\n  getGradient() {\n    return Math.atan2(this.dy, this.dx);\n  }\n\n  rangeOut(particle) {\n    const angle = Math.abs(this.getGradient());\n\n    if (angle <= MathUtil.PI / 4) {\n      if (particle.p.x <= this.maxx && particle.p.x >= this.minx) return true;\n    } else {\n      if (particle.p.y <= this.maxy && particle.p.y >= this.miny) return true;\n    }\n\n    return false;\n  }\n\n  getLength() {\n    return Math.sqrt(this.dx * this.dx + this.dy * this.dy);\n  }\n\n  crossing(particle) {\n    if (this.crossType === \"dead\") {\n      if (\n        this.direction === \">\" ||\n        this.direction === \"R\" ||\n        this.direction === \"right\" ||\n        this.direction === \"down\"\n      ) {\n        if (!this.rangeOut(particle)) return;\n        if (this.getDirection(particle.p.x, particle.p.y)) particle.dead = true;\n      } else {\n        if (!this.rangeOut(particle)) return;\n        if (!this.getDirection(particle.p.x, particle.p.y))\n          particle.dead = true;\n      }\n    } else if (this.crossType === \"bound\") {\n      if (!this.rangeOut(particle)) return;\n\n      if (this.getDistance(particle.p.x, particle.p.y) <= particle.radius) {\n        if (this.dx === 0) {\n          particle.v.x *= -1;\n        } else if (this.dy === 0) {\n          particle.v.y *= -1;\n        } else {\n          this.getSymmetric(particle.v);\n        }\n      }\n    } else if (this.crossType === \"cross\") {\n      if (this.alert) {\n        console.error(\"Sorry, LineZone does not support cross method!\");\n        this.alert = false;\n      }\n    }\n  }\n}\n","import Zone from \"./Zone\";\nimport MathUtil from \"../math/MathUtil\";\n\nexport default class CircleZone extends Zone {\n  constructor(x, y, radius) {\n    super();\n\n    this.x = x;\n    this.y = y;\n    this.radius = radius;\n\n    this.angle = 0;\n    this.center = { x, y };\n  }\n\n  getPosition() {\n    this.angle = MathUtil.PIx2 * Math.random();\n    this.randomRadius = Math.random() * this.radius;\n\n    this.vector.x = this.x + this.randomRadius * Math.cos(this.angle);\n    this.vector.y = this.y + this.randomRadius * Math.sin(this.angle);\n\n    return this.vector;\n  }\n\n  setCenter(x, y) {\n    this.center.x = x;\n    this.center.y = y;\n  }\n\n  crossing(particle) {\n    const d = particle.p.distanceTo(this.center);\n\n    if (this.crossType === \"dead\") {\n      if (d - particle.radius > this.radius) particle.dead = true;\n    } else if (this.crossType === \"bound\") {\n      if (d + particle.radius >= this.radius) this.getSymmetric(particle);\n    } else if (this.crossType === \"cross\") {\n      if (this.alert) {\n        console.error(\"Sorry, CircleZone does not support cross method!\");\n        this.alert = false;\n      }\n    }\n  }\n\n  getSymmetric(particle) {\n    let tha2 = particle.v.getGradient();\n    let tha1 = this.getGradient(particle);\n\n    let tha = 2 * (tha1 - tha2);\n    let oldx = particle.v.x;\n    let oldy = particle.v.y;\n\n    particle.v.x = oldx * Math.cos(tha) - oldy * Math.sin(tha);\n    particle.v.y = oldx * Math.sin(tha) + oldy * Math.cos(tha);\n  }\n\n  getGradient(particle) {\n    return (\n      -MathUtil.PI_2 +\n      Math.atan2(particle.p.y - this.center.y, particle.p.x - this.center.x)\n    );\n  }\n}\n","import Zone from \"./Zone\";\n\nexport default class RectZone extends Zone {\n  constructor(x, y, width, height) {\n    super();\n\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n  }\n\n  getPosition() {\n    this.vector.x = this.x + Math.random() * this.width;\n    this.vector.y = this.y + Math.random() * this.height;\n\n    return this.vector;\n  }\n\n  crossing(particle) {\n    // particle dead zone\n    if (this.crossType === \"dead\") {\n      if (particle.p.x + particle.radius < this.x) particle.dead = true;\n      else if (particle.p.x - particle.radius > this.x + this.width)\n        particle.dead = true;\n\n      if (particle.p.y + particle.radius < this.y) particle.dead = true;\n      else if (particle.p.y - particle.radius > this.y + this.height)\n        particle.dead = true;\n    }\n\n    // particle bound zone\n    else if (this.crossType === \"bound\") {\n      if (particle.p.x - particle.radius < this.x) {\n        particle.p.x = this.x + particle.radius;\n        particle.v.x *= -1;\n      } else if (particle.p.x + particle.radius > this.x + this.width) {\n        particle.p.x = this.x + this.width - particle.radius;\n        particle.v.x *= -1;\n      }\n\n      if (particle.p.y - particle.radius < this.y) {\n        particle.p.y = this.y + particle.radius;\n        particle.v.y *= -1;\n      } else if (particle.p.y + particle.radius > this.y + this.height) {\n        particle.p.y = this.y + this.height - particle.radius;\n        particle.v.y *= -1;\n      }\n    }\n\n    // particle cross zone\n    else if (this.crossType === \"cross\") {\n      if (particle.p.x + particle.radius < this.x && particle.v.x <= 0)\n        particle.p.x = this.x + this.width + particle.radius;\n      else if (\n        particle.p.x - particle.radius > this.x + this.width &&\n        particle.v.x >= 0\n      )\n        particle.p.x = this.x - particle.radius;\n\n      if (particle.p.y + particle.radius < this.y && particle.v.y <= 0)\n        particle.p.y = this.y + this.height + particle.radius;\n      else if (\n        particle.p.y - particle.radius > this.y + this.height &&\n        particle.v.y >= 0\n      )\n        particle.p.y = this.y - particle.radius;\n    }\n  }\n}\n","import Zone from \"./Zone\";\nimport Util from \"../utils/Util\";\n\nexport default class ImageZone extends Zone {\n  constructor(imageData, x, y, d) {\n    super();\n\n    this.reset(imageData, x, y, d);\n  }\n\n  reset(imageData, x, y, d) {\n    this.imageData = imageData;\n    this.x = Util.initValue(x, 0);\n    this.y = Util.initValue(y, 0);\n    this.d = Util.initValue(d, 2);\n\n    this.vectors = [];\n    this.setVectors();\n  }\n\n  setVectors() {\n    let i, j;\n    const length1 = this.imageData.width;\n    const length2 = this.imageData.height;\n\n    for (i = 0; i < length1; i += this.d) {\n      for (j = 0; j < length2; j += this.d) {\n        let index = ((j >> 0) * length1 + (i >> 0)) * 4;\n\n        if (this.imageData.data[index + 3] > 0) {\n          this.vectors.push({ x: i + this.x, y: j + this.y });\n        }\n      }\n    }\n\n    return this.vector;\n  }\n\n  getBound(x, y) {\n    var index = ((y >> 0) * this.imageData.width + (x >> 0)) * 4;\n    if (this.imageData.data[index + 3] > 0) return true;\n    else return false;\n  }\n\n  getPosition() {\n    const vector = Util.getRandFromArray(this.vectors);\n    return this.vector.copy(vector);\n  }\n\n  getColor(x, y) {\n    x -= this.x;\n    y -= this.y;\n    var i = ((y >> 0) * this.imageData.width + (x >> 0)) * 4;\n\n    return {\n      r: this.imageData.data[i],\n      g: this.imageData.data[i + 1],\n      b: this.imageData.data[i + 2],\n      a: this.imageData.data[i + 3]\n    };\n  }\n\n  crossing(particle) {\n    if (this.crossType === \"dead\") {\n      if (this.getBound(particle.p.x - this.x, particle.p.y - this.y))\n        particle.dead = true;\n      else particle.dead = false;\n    } else if (this.crossType === \"bound\") {\n      if (!this.getBound(particle.p.x - this.x, particle.p.y - this.y))\n        particle.v.negate();\n    }\n  }\n}\n","import ColorUtil from \"../utils/ColorUtil\";\nimport CircleZone from \"../zone/CircleZone\";\nimport PointZone from \"../zone/PointZone\";\nimport LineZone from \"../zone/LineZone\";\nimport RectZone from \"../zone/RectZone\";\n\nexport default {\n  addEventListener(proton, func) {\n    proton.addEventListener(\"PROTON_UPDATE_AFTER\", () => func());\n  },\n\n  getStyle(color = \"#ff0000\") {\n    const rgb = ColorUtil.hexToRgb(color);\n    return `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.5)`;\n  },\n\n  drawZone(proton, canvas, zone, clear) {\n    const context = canvas.getContext(\"2d\");\n    const style = this.getStyle();\n\n    this.addEventListener(proton, () => {\n      if (clear) context.clearRect(0, 0, canvas.width, canvas.height);\n\n      if (zone instanceof PointZone) {\n        context.beginPath();\n        context.fillStyle = style;\n        context.arc(zone.x, zone.y, 10, 0, Math.PI * 2, true);\n        context.fill();\n        context.closePath();\n      } else if (zone instanceof LineZone) {\n        context.beginPath();\n        context.strokeStyle = style;\n        context.moveTo(zone.x1, zone.y1);\n        context.lineTo(zone.x2, zone.y2);\n        context.stroke();\n        context.closePath();\n      } else if (zone instanceof RectZone) {\n        context.beginPath();\n        context.strokeStyle = style;\n        context.drawRect(zone.x, zone.y, zone.width, zone.height);\n        context.stroke();\n        context.closePath();\n      } else if (zone instanceof CircleZone) {\n        context.beginPath();\n        context.strokeStyle = style;\n        context.arc(zone.x, zone.y, zone.radius, 0, Math.PI * 2, true);\n        context.stroke();\n        context.closePath();\n      }\n    });\n  },\n\n  drawEmitter(proton, canvas, emitter, clear) {\n    const context = canvas.getContext(\"2d\");\n    const style = this.getStyle();\n\n    this.addEventListener(proton, () => {\n      if (clear) context.clearRect(0, 0, canvas.width, canvas.height);\n\n      context.beginPath();\n      context.fillStyle = style;\n      context.arc(emitter.p.x, emitter.p.y, 10, 0, Math.PI * 2, true);\n      context.fill();\n      context.closePath();\n    });\n  }\n};\n","import Proton from \"./core/Proton\";\nimport Particle from \"./core/Particle\";\nimport Pool from \"./core/Pool\";\n\nimport Util from \"./utils/Util\";\nimport ColorUtil from \"./utils/ColorUtil\";\nimport MathUtil from \"./math/MathUtil\";\nimport Vector2D from \"./math/Vector2D\";\nimport Polar2D from \"./math/Polar2D\";\nimport Mat3 from \"./math/Mat3\";\nimport Span from \"./math/Span\";\nimport ArraySpan from \"./math/ArraySpan\";\nimport Rectangle from \"./math/Rectangle\";\nimport ease from \"./math/ease\";\n\nimport Rate from \"./initialize/Rate\";\nimport Initialize from \"./initialize/Initialize\";\nimport Life from \"./initialize/Life\";\nimport Position from \"./initialize/Position\";\nimport Velocity from \"./initialize/Velocity\";\nimport Mass from \"./initialize/Mass\";\nimport Radius from \"./initialize/Radius\";\nimport Body from \"./initialize/Body\";\n\nimport Behaviour from \"./behaviour/Behaviour\";\nimport Force from \"./behaviour/Force\";\nimport Attraction from \"./behaviour/Attraction\";\nimport RandomDrift from \"./behaviour/RandomDrift\";\nimport Gravity from \"./behaviour/Gravity\";\nimport Collision from \"./behaviour/Collision\";\nimport CrossZone from \"./behaviour/CrossZone\";\nimport Alpha from \"./behaviour/Alpha\";\nimport Scale from \"./behaviour/Scale\";\nimport Rotate from \"./behaviour/Rotate\";\nimport Color from \"./behaviour/Color\";\nimport Cyclone from \"./behaviour/Cyclone\";\nimport Repulsion from \"./behaviour/Repulsion\";\nimport GravityWell from \"./behaviour/GravityWell\";\n\nimport Emitter from \"./emitter/Emitter\";\nimport BehaviourEmitter from \"./emitter/BehaviourEmitter\";\nimport FollowEmitter from \"./emitter/FollowEmitter\";\n\nimport CanvasRenderer from \"./render/CanvasRenderer\";\nimport DomRenderer from \"./render/DomRenderer\";\nimport EaselRenderer from \"./render/EaselRenderer\";\nimport PixelRenderer from \"./render/PixelRenderer\";\nimport PixiRenderer from \"./render/PixiRenderer\";\nimport WebGLRenderer from \"./render/WebGLRenderer\";\nimport CustomRenderer from \"./render/CustomRenderer\";\n\nimport Zone from \"./zone/Zone\";\nimport LineZone from \"./zone/LineZone\";\nimport CircleZone from \"./zone/CircleZone\";\nimport PointZone from \"./zone/PointZone\";\nimport RectZone from \"./zone/RectZone\";\nimport ImageZone from \"./zone/ImageZone\";\n\nimport Debug from \"./debug/Debug\";\n\n// namespace\nProton.Particle = Proton.P = Particle;\nProton.Pool = Pool;\n\nProton.Util = Util;\nProton.ColorUtil = ColorUtil;\nProton.MathUtil = MathUtil;\nProton.Vector2D = Proton.Vector = Vector2D;\nProton.Polar2D = Proton.Polar = Polar2D;\nProton.ArraySpan = ArraySpan;\nProton.Rectangle = Rectangle;\nProton.Rate = Rate;\nProton.ease = ease;\nProton.Span = Span;\nProton.Mat3 = Mat3;\nProton.getSpan = (a, b, center) => new Span(a, b, center);\nProton.createArraySpan = ArraySpan.createArraySpan;\n\nProton.Initialize = Proton.Init = Initialize;\nProton.Life = Proton.L = Life;\nProton.Position = Proton.P = Position;\nProton.Velocity = Proton.V = Velocity;\nProton.Mass = Proton.M = Mass;\nProton.Radius = Proton.R = Radius;\nProton.Body = Proton.B = Body;\n\nProton.Behaviour = Behaviour;\nProton.Force = Proton.F = Force;\nProton.Attraction = Proton.A = Attraction;\nProton.RandomDrift = Proton.RD = RandomDrift;\nProton.Gravity = Proton.G = Gravity;\nProton.Collision = Collision;\nProton.CrossZone = CrossZone;\nProton.Alpha = Proton.A = Alpha;\nProton.Scale = Proton.S = Scale;\nProton.Rotate = Rotate;\nProton.Color = Color;\nProton.Repulsion = Repulsion;\nProton.Cyclone = Cyclone;\nProton.GravityWell = GravityWell;\n\nProton.Emitter = Emitter;\nProton.BehaviourEmitter = BehaviourEmitter;\nProton.FollowEmitter = FollowEmitter;\n\nProton.Zone = Zone;\nProton.LineZone = LineZone;\nProton.CircleZone = CircleZone;\nProton.PointZone = PointZone;\nProton.RectZone = RectZone;\nProton.ImageZone = ImageZone;\n\nProton.CanvasRenderer = CanvasRenderer;\nProton.DomRenderer = DomRenderer;\nProton.EaselRenderer = EaselRenderer;\nProton.PixiRenderer = PixiRenderer;\nProton.PixelRenderer = PixelRenderer;\nProton.WebGLRenderer = Proton.WebGlRenderer = WebGLRenderer;\nProton.CustomRenderer = CustomRenderer;\n\nProton.Debug = Debug;\n\nObject.assign(Proton, ease);\n\n// export\nexport default Proton;\n"],"names":["PI","MathUtil","num","this","Infinity","a","b","Math","floor","random","center","f","isInt","randomAToB","toString","slice","k","digits","pow","Span","isArray","Util","getRandFromArray","randomFloating","c","undefined","pan","getValue","initValue","length","i","tx","ty","angleInRadians","cos","s","sin","sx","sy","a00","a01","a02","a10","a11","a12","a20","a21","a22","b00","b01","b02","b10","b11","b12","b20","b21","b22","id","width","height","position","dom","document","createElement","style","opacity","transform","resize","marginLeft","marginTop","div","x","y","scale","rotate","willChange","css3","key","val","bkey","charAt","toUpperCase","substr","imgsCache","canvasCache","canvasId","context","image","rect","drawImage","imagedata","getImageData","clearRect","img","callback","param","src","Image","onload","e","target","WebGLUtil","canvas","DomUtil","createCanvas","getContext","value","defaults","Object","prototype","call","arr","obj","ignore","indexOf","constructor","args","bind","apply","concat","particle","conf","hasProp","p","v","copy","props","prop","hasOwnProperty","getSpanValue","ImgUtil","destroy","idsMap","Puid","type","uid","getIdFromCache","_index","_cache","isBody","isInner","Pool","params","__puid","getId","cache","pop","createOrClone","getCache","push","total","create","classApply","clone","count","Stats","body","add","emitter","getEmitter","renderer","getRenderer","str","proton","emitters","emitSpeed","getEmitterPos","initializes","concatArr","behaviours","name","getCreatedNumber","getCount","pool","container","innerHTML","cssText","join","addEventListener","_this","bg","color","parentNode","appendChild","emitterIndex","renderers","rendererIndex","result","cpool","round","EventDispatcher","listener","_listeners","removeEventListener","splice","listeners","handler","dispatchEvent","hasEventListener","removeAllEventListeners","Integration","particles","time","damping","eulerIntegrate","sleep","old","multiplyScalar","mass","clear","Proton","render","init","index","remove","parent","EMITTER_ADDED","EMITTER_REMOVED","_fps","PROTON_UPDATE","USE_CLOCK","then","Date","getTime","now","elapsed","amendChangeTabsBug","emittersUpdate","DEFAULT_INTERVAL","PROTON_UPDATE_AFTER","_interval","update","destroyAll","destroyOther","getAllParticles","fps","integrationType","stats","EULER","integrator","MEASURE","RK2","PARTICLE_CREATED","PARTICLE_UPDATE","PARTICLE_SLEEP","PARTICLE_DEAD","Rgb","r","g","PI_2","sqrt","ease","easeLinear","Vector2D","atan2","w","addVectors","subVectors","set","divideScalar","distanceToSquared","tha","dx","dy","alpha","Particle","N180_PI","life","age","dead","sprite","energy","radius","rotation","easing","rgb","reset","emptyObject","data","removeAllBehaviours","applyBehaviours","max","applyBehaviour","behaviour","parents","initialize","addBehaviour","emptyArray","setProp","h","hex16","substring","parseInt","rbg","Number","Polar2D","getX","getY","abs","Mat3","mat3","mat","Float32Array","mat1","mat2","m","vec","ArraySpan","_arr","randomColor","toArray","Rectangle","right","bottom","Rate","startTime","nextTime","timePan","numPan","numpan","timepan","setSpanValue","Initialize","Life","lifePan","Zone","vector","crossType","alert","PointZone","error","Position","zone","getPosition","Velocity","rpan","thapan","rPan","thaPan","vr","polar2d","normalizeVelocity","PI_180","Mass","massPan","Radius","oldRadius","Body","imageTarget","Behaviour","getEasing","force","removeBehaviour","Force","fx","fy","normalizeForce","calculate","Attraction","targetPosition","normalizeValue","radiusSq","attractionForce","lengthSq","sub","normalize","RandomDrift","driftX","driftY","delay","panFoce","addXY","Gravity","Collision","collisionPool","delta","newPool","otherParticle","overlap","totalMass","averageMass1","averageMass2","distance","CrossZone","crossing","Alpha","same","alphaA","alphaB","Scale","scaleA","scaleB","Rotate","rotationA","rotationB","getDirection","influence","Color","createArraySpan","colorA","ColorUtil","hexToRgb","colorB","CHANGING","Cyclone","angle","span","String","toLowerCase","setAngleAndForce","cangle","cyclone","gradient","getGradient","Repulsion","GravityWell","centerPoint","distanceVec","distanceSq","factor","bindEmitter","setVectorVal","degreeTransform","Emitter","totalTime","stoped","emitTime","isNaN","rate","oldStoped","oldEmitTime","oldTotalTime","initAll","rest","initializer","arguments","emitting","integrate","dispatch","expire","event","bindEvent","createParticle","get","setupParticle","addBehaviours","stop","removeAllInitializers","removeEmitter","BehaviourEmitter","selfBehaviours","FollowEmitter","mousemoveHandler","_this2","mousemove","mousedownHandler","mousedown","mouseupHandler","mouseup","mouseTarget","_allowEmitting","layerX","layerY","offsetX","offsetY","babelHelpers.get","window","initEventHandler","BaseRenderer","thinkness","stroke","_protonUpdateHandler","onProtonUpdate","_protonUpdateAfterHandler","onProtonUpdateAfter","_emitterAddedHandler","onEmitterAdded","_emitterRemovedHandler","onEmitterRemoved","_particleCreatedHandler","onParticleCreated","_particleUpdateHandler","onParticleUpdate","_particleDeadHandler","onParticleDead","element","circleConf","isCircle","initHandler","CanvasRenderer","addImg2Body","drawCircle","buffer","createBuffer","bufContext","globalAlpha","globalCompositeOperation","fillStyle","rgbToHex","fillRect","save","translate","restore","beginPath","arc","strokeStyle","lineWidth","closePath","fill","size","bufferCache","DomRenderer","bodyReady","transform3d","backgroundColor","removeChild","babelHelpers.typeof","createCircle","createSprite","createDiv","borderRadius","borderColor","borderWidth","url","backgroundImage","createBody","EaselRenderer","addChild","scaleX","scaleY","graphics","regX","regY","createjs","Graphics","beginStroke","beginFill","shape","Shape","PixelRenderer","rectangle","imageData","createImageData","putImageData","setPixel","elementwidth","PIXIClass","PixiRenderer","PIXI","Sprite","createFromImage","from","fromImage","blendMode","setColor","tint","getHex16FromParticle","anchor","endFill","setPIXI","MStack","mats","multiply","WebGLRenderer","umat","smat","mstack","gl","viewport","circleCanvasURL","texturebuffers","A","blendEquation","B","blendFunc","fs","shader","createShader","FRAGMENT_SHADER","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","fragmentShader","getShader","getFragmentShader","vertexShader","getVertexShader","sprogram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","useProgram","vpa","getAttribLocation","tca","enableVertexAttribArray","tMatUniform","getUniformLocation","samplerUniform","useTex","uniform1i","idx","unitIBuffer","bindBuffer","ELEMENT_ARRAY_BUFFER","bufferData","Uint16Array","STATIC_DRAW","ids","unitI33","stripBuffer","raidus","circleCanvasRadius","toDataURL","_w","_h","_width","_height","_scaleX","_scaleY","createTexture","texture","vcBuffer","tcBuffer","ARRAY_BUFFER","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_NEAREST","generateMipmap","textureLoaded","textureWidth","textureHeight","tmat","imat","oldScale","drawImg2Canvas","updateMatrix","uniform3f","uniformMatrix3fv","top","vertexAttribPointer","FLOAT","drawElements","TRIANGLES","UNSIGNED_SHORT","moveOriginMatrix","translationMatrix","angel","rotationMatrix","scaleMatrix","matrix","inverse","antialias","stencil","depth","initVar","setMaxRadius","initShaders","initBuffers","FUNC_ADD","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","enable","BLEND","CustomRenderer","LineZone","x1","y1","dot","xxyy","tha2","oldx","oldy","maxx","minx","maxy","miny","direction","rangeOut","getDistance","getSymmetric","x2","y2","min","getLength","CircleZone","PIx2","randomRadius","d","distanceTo","RectZone","ImageZone","vectors","setVectors","j","length1","length2","getBound","negate","func","getStyle","moveTo","lineTo","drawRect","P","Vector","Polar","getSpan","Init","L","V","M","R","F","RD","G","S","WebGlRenderer","Debug","assign"],"mappings":"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"}